
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>ç¯å¢ƒä¾èµ– &#8212; Ray 2.7.2</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/autodoc_pydantic.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css" />
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/termynal.css" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/js/versionwarning.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
    <script defer="defer" src="../_static/js/docsearch.js"></script>
    <script defer="defer" src="../_static/js/csat.js"></script>
    <script defer="defer" src="../_static/js/termynal.js"></script>
    <script defer="defer" src="../_static/js/custom.js"></script>
    <script defer="defer" src="../_static/js/top-navigation.js"></script>
    <script src="../_static/js/tags.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/design-tabs.js"></script>
    <link rel="canonical" href="https://docs.ray.io/en/latest/ray-core/handling-dependencies.html" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="è°ƒåº¦" href="scheduling/index.html" />
    <link rel="prev" title="å¯¹è±¡æº¢å‡º" href="objects/object-spilling.html" />

<!-- Fathom - beautiful, simple website analytics -->
<script src="https://deer.ray.io/script.js" data-site="WYYANYOS" defer></script>
<!-- / Fathom -->

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-110413294-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-110413294-1');
</script>

<script
  src="https://widget.kapa.ai/kapa-widget.bundle.js"
  data-website-id="18a8c339-4ec5-43c8-8182-db3f2bc8c6b6"
  data-project-name="Ray"
  data-project-color="#2C2C2C"
  data-project-logo="https://global.discourse-cdn.com/business7/uploads/ray/original/1X/8f4dcb72f7cd34e2a332d548bd65860994bc8ff1.png"
  data-modal-disclaimer = "Results are automated and may be incorrect or contain inappropriate information. Do not include any personal data or confidential information."
  data-modal-title = "Ray Docs AI - Ask a Question"
  data-button-position-bottom = "60px"
></script>

<script>
(function(apiKey){
    (function(p,e,n,d,o){var v,w,x,y,z;o=p[d]=p[d]||{};o._q=o._q||[];
    v=['initialize','identify','updateOptions','pageLoad','track'];for(w=0,x=v.length;w<x;++w)(function(m){
        o[m]=o[m]||function(){o._q[m===v[0]?'unshift':'push']([m].concat([].slice.call(arguments,0)));};})(v[w]);
        y=e.createElement(n);y.async=!0;y.src='https://cdn.pendo.io/agent/static/'+apiKey+'/pendo.js';
        z=e.getElementsByTagName(n)[0];z.parentNode.insertBefore(y,z);})(window,document,'script','pendo');

        pendo.initialize({
            visitor: {
                id: 'VISITOR-UNIQUE-ID'
            },
            account: {
                id: 'ACCOUNT-UNIQUE-ID'
            }
        });
})('f89fa48a-6dd7-4d7c-67cf-a8051ed891f2');
</script>



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"><div class='topnav'></div></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
      
      
      <h1 class="site-logo" id="site-title">Ray 2.7.2</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main Navigation">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../index.html">
                    æ¬¢è¿æ¥åˆ° Ray ï¼
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Ray
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../ray-overview/index.html">
   æ¦‚è¿°ã€Œ100%ã€
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ray-overview/getting-started.html">
   å…¥é—¨ã€Œ100%ã€
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ray-overview/installation.html">
   å®‰è£…ã€Œ100%ã€
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ray-overview/use-cases.html">
   ç”¨ä¾‹ã€Œ100%ã€
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ray-overview/examples.html">
   ç¤ºä¾‹åº“ã€Œ1%ã€
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ray-overview/ray-libraries.html">
   ç”Ÿæ€ã€Œ3%ã€
  </a>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="walkthrough.html">
   Ray æ ¸å¿ƒã€Œ100%ã€
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="key-concepts.html">
     å…³é”®æ¦‚å¿µ
    </a>
   </li>
   <li class="toctree-l2 current active has-children">
    <a class="reference internal" href="user-guide.html">
     ç”¨æˆ·æŒ‡å—
    </a>
    <input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
    <label for="toctree-checkbox-2">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul class="current">
     <li class="toctree-l3">
      <a class="reference internal" href="tasks.html">
       ä»»åŠ¡
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="actors.html">
       Actors
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="objects.html">
       å¯¹è±¡
      </a>
     </li>
     <li class="toctree-l3 current active">
      <a class="current reference internal" href="#">
       ç¯å¢ƒä¾èµ–
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="scheduling/index.html">
       è°ƒåº¦
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="fault-tolerance.html">
       å®¹é”™
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="patterns/index.html">
       è®¾è®¡æ¨¡å‹ åŠ åæ¨¡å¼
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="advanced-topics.html">
       é«˜çº§ä¸»é¢˜
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="examples/overview.html">
     ç¤ºä¾‹
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="api/index.html">
     Ray Core API
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../data/data.html">
   Ray æ•°æ®ã€Œ85%ã€
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../train/train.html">
   Ray è®­ç»ƒã€Œ95%ã€
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../tune/index.html">
   Ray è°ƒå‚ã€Œ0%ã€
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../serve/index.html">
   Ray Serveã€Œ1%ã€
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../rllib/index.html">
   Ray RLlibã€Œ0%ã€
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ray-more-libs/index.html">
   æ›´å¤šç±»åº“ã€Œ40%ã€
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../cluster/getting-started.html">
   Ray é›†ç¾¤ã€Œ100%ã€
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ray-observability/index.html">
   ç›‘æ§è°ƒè¯•ã€Œ100%ã€
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ray-references/api.html">
   å‚è€ƒã€Œ20%ã€
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ray-contribute/index.html">
   å¼€å‘è€…æŒ‡å¼•ã€Œ30%ã€
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ray-security/index.html">
   å®‰å…¨ã€Œ100%ã€
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/ray-project/ray"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/ray-project/ray/issues/new?title=Issue%20on%20page%20%2Fray-core/handling-dependencies.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="headerbtn__text-container">open issue</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/ray-project/ray/edit/master/doc/source/ray-core/handling-dependencies.rst"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Edit this page"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="headerbtn__text-container">suggest edit</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../_sources/ray-core/handling-dependencies.rst.txt"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.rst</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id2">
   æ¦‚å¿µ
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#ray-cluster-launcher">
   ä½¿ç”¨ Ray Cluster launcher å‡†å¤‡ç¯å¢ƒ
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#runtime-environments">
   è¿è¡Œç¯å¢ƒ
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#rte-per-job">
     æ¯ä¸ªä½œä¸šæŒ‡å®šè¿è¡Œæ—¶ç¯å¢ƒ
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#actor">
     ä¸ºæ¯ä¸ªä»»åŠ¡æˆ–æ¯ä¸ª Actor æŒ‡å®šè¿è¡Œæ—¶
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id5">
     å¸¸è§å·¥ä½œæµç¨‹
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#workflow-local-files">
       ä½¿ç”¨æœ¬åœ°æ–‡ä»¶
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#conda-pip">
       ä½¿ç”¨
       <code class="docutils literal notranslate">
        <span class="pre">
         conda
        </span>
       </code>
       æˆ–
       <code class="docutils literal notranslate">
        <span class="pre">
         pip
        </span>
       </code>
       åŒ…
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id7">
       ç±»åº“å¼€å‘
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#api">
     API å‚è€ƒ
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#runtime-environments-caching">
       ç¼“å­˜å’Œåƒåœ¾å›æ”¶
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id9">
       ç»§æ‰¿
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#runtime-env-faq">
     å¸¸è§é—®é¢˜
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id11">
       ç¯å¢ƒä¼šè¢«å®‰è£…åˆ°æ¯ä¸ªèŠ‚ç‚¹å—ï¼Ÿ
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id12">
       ç¯å¢ƒä»€ä¹ˆæ—¶å€™å®‰è£…ï¼Ÿ
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id13">
       ç¯å¢ƒç¼“å­˜åœ¨å“ªé‡Œï¼Ÿ
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id14">
       å®‰è£…æˆ–ä»ç¼“å­˜åŠ è½½éœ€è¦å¤šé•¿æ—¶é—´ï¼Ÿ
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#docker">
       è¿è¡Œç¯å¢ƒå’Œ Docker æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#runtime-env">
       æˆ‘çš„
       <code class="docutils literal notranslate">
        <span class="pre">
         runtime_env
        </span>
       </code>
       å·²ç»å®‰è£…äº†ï¼Œä½†æ˜¯å½“æˆ‘ç™»å½•åˆ°èŠ‚ç‚¹æ—¶ï¼Œæˆ‘æ— æ³•å¯¼å…¥è¿™äº›åŒ…ã€‚
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#uri">
   è¿œç¨‹ URI
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#git">
   åœ¨è¿œç¨‹ Git æä¾›å•†ä¸Šæ‰˜ç®¡ä¾èµ–é¡¹ï¼šæ‰‹æŠŠæ‰‹æŒ‡å—
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#zip">
     æ–¹æ³• 1: ä¸‹è½½ Zip (å¿«é€Ÿå®ç°ï¼Œå•ä¸æ¨èç”¨äºç”Ÿäº§ç¯å¢ƒ)
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#url">
     æ–¹æ³• 2: æ‰‹åŠ¨åˆ›å»º URL (è¾ƒæ…¢å®ç°ï¼Œä½†æ¨èç”¨äºç”Ÿäº§)
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id17">
   è°ƒè¯•
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>ç¯å¢ƒä¾èµ–</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id2">
   æ¦‚å¿µ
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#ray-cluster-launcher">
   ä½¿ç”¨ Ray Cluster launcher å‡†å¤‡ç¯å¢ƒ
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#runtime-environments">
   è¿è¡Œç¯å¢ƒ
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#rte-per-job">
     æ¯ä¸ªä½œä¸šæŒ‡å®šè¿è¡Œæ—¶ç¯å¢ƒ
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#actor">
     ä¸ºæ¯ä¸ªä»»åŠ¡æˆ–æ¯ä¸ª Actor æŒ‡å®šè¿è¡Œæ—¶
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id5">
     å¸¸è§å·¥ä½œæµç¨‹
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#workflow-local-files">
       ä½¿ç”¨æœ¬åœ°æ–‡ä»¶
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#conda-pip">
       ä½¿ç”¨
       <code class="docutils literal notranslate">
        <span class="pre">
         conda
        </span>
       </code>
       æˆ–
       <code class="docutils literal notranslate">
        <span class="pre">
         pip
        </span>
       </code>
       åŒ…
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id7">
       ç±»åº“å¼€å‘
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#api">
     API å‚è€ƒ
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#runtime-environments-caching">
       ç¼“å­˜å’Œåƒåœ¾å›æ”¶
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id9">
       ç»§æ‰¿
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#runtime-env-faq">
     å¸¸è§é—®é¢˜
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id11">
       ç¯å¢ƒä¼šè¢«å®‰è£…åˆ°æ¯ä¸ªèŠ‚ç‚¹å—ï¼Ÿ
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id12">
       ç¯å¢ƒä»€ä¹ˆæ—¶å€™å®‰è£…ï¼Ÿ
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id13">
       ç¯å¢ƒç¼“å­˜åœ¨å“ªé‡Œï¼Ÿ
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id14">
       å®‰è£…æˆ–ä»ç¼“å­˜åŠ è½½éœ€è¦å¤šé•¿æ—¶é—´ï¼Ÿ
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#docker">
       è¿è¡Œç¯å¢ƒå’Œ Docker æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#runtime-env">
       æˆ‘çš„
       <code class="docutils literal notranslate">
        <span class="pre">
         runtime_env
        </span>
       </code>
       å·²ç»å®‰è£…äº†ï¼Œä½†æ˜¯å½“æˆ‘ç™»å½•åˆ°èŠ‚ç‚¹æ—¶ï¼Œæˆ‘æ— æ³•å¯¼å…¥è¿™äº›åŒ…ã€‚
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#uri">
   è¿œç¨‹ URI
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#git">
   åœ¨è¿œç¨‹ Git æä¾›å•†ä¸Šæ‰˜ç®¡ä¾èµ–é¡¹ï¼šæ‰‹æŠŠæ‰‹æŒ‡å—
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#zip">
     æ–¹æ³• 1: ä¸‹è½½ Zip (å¿«é€Ÿå®ç°ï¼Œå•ä¸æ¨èç”¨äºç”Ÿäº§ç¯å¢ƒ)
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#url">
     æ–¹æ³• 2: æ‰‹åŠ¨åˆ›å»º URL (è¾ƒæ…¢å®ç°ï¼Œä½†æ¨èç”¨äºç”Ÿäº§)
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id17">
   è°ƒè¯•
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section id="handling-dependencies">
<span id="id1"></span><h1>ç¯å¢ƒä¾èµ–<a class="headerlink" href="#handling-dependencies" title="Permalink to this headline">#</a></h1>
<p>ä½ çš„ Ray åº”ç”¨ç¨‹åºå¯èƒ½å…·æœ‰ Ray è„šæœ¬ä¹‹å¤–çš„ä¾èµ–é¡¹ã€‚ä¾‹å¦‚ï¼š</p>
<ul class="simple">
<li><p>æ‚¨çš„ Ray è„šæœ¬å¯èƒ½ä¼šå¯¼å…¥/ä¾èµ–ä¸€äº› Python åŒ…ã€‚</p></li>
<li><p>æ‚¨çš„ Ray è„šæœ¬å¯èƒ½æ­£åœ¨å¯»æ‰¾ä¸€äº›å¯ç”¨çš„ç‰¹å®šç¯å¢ƒå˜é‡ã€‚</p></li>
<li><p>ä½ çš„ Ray è„šæœ¬å¯èƒ½ä¼šå¯¼å…¥ä¸€äº›è„šæœ¬ä¹‹å¤–çš„æ–‡ä»¶ã€‚</p></li>
</ul>
<p>åœ¨é›†ç¾¤ä¸Šè¿è¡Œæ—¶ï¼Œä¸€ä¸ªå¸¸è§é—®é¢˜æ˜¯ Ray æœŸæœ›è¿™äº›â€œä¾èµ–é¡¹â€å­˜åœ¨äºæ¯ä¸ª Ray èŠ‚ç‚¹ä¸Šã€‚å¦‚æœä¸å­˜åœ¨è¿™äº›ï¼Œæ‚¨å¯èƒ½ä¼šé‡åˆ°è¯¸å¦‚ <code class="docutils literal notranslate"><span class="pre">ModuleNotFoundError</span></code> æˆ– <code class="docutils literal notranslate"><span class="pre">FileNotFoundError</span></code> ç­‰é—®é¢˜ã€‚</p>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæ‚¨å¯ä»¥ (1) ä½¿ç”¨ Ray <a class="reference internal" href="../cluster/vms/getting-started.html#vm-cluster-quick-start"><span class="std std-ref">Cluster Launcher</span></a> æå‰å‡†å¤‡é›†ç¾¤ä¸Šçš„ä¾èµ–é¡¹ï¼ˆä¾‹å¦‚ä½¿ç”¨å®¹å™¨æ˜ åƒï¼‰ï¼Œæˆ–è€… (2) ä½¿ç”¨ Ray çš„ <a class="reference internal" href="#runtime-environments"><span class="std std-ref">è¿è¡Œæ—¶ç¯å¢ƒ</span></a> åŠ¨æ€å®‰è£…å®ƒä»¬ã€‚</p>
<p>å¯¹äºç”Ÿäº§ç”¨é€”æˆ–éå˜æ›´ç¯å¢ƒï¼Œæˆ‘ä»¬å»ºè®®å°†ä¾èµ–é¡¹å®‰è£…åˆ°å®¹å™¨æ˜ åƒä¸­ï¼Œå¹¶ä½¿ç”¨ Cluster Launcher æŒ‡å®šæ˜ åƒã€‚
å¯¹äºåŠ¨æ€ç¯å¢ƒï¼ˆä¾‹å¦‚ç”¨äºå¼€å‘å’Œå®éªŒï¼‰ï¼Œæˆ‘ä»¬å»ºè®®ä½¿ç”¨è¿è¡Œæ—¶ç¯å¢ƒã€‚</p>
<section id="id2">
<h2>æ¦‚å¿µ<a class="headerlink" href="#id2" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p><strong>Ray åº”ç”¨ç¨‹åº</strong>ã€‚  åŒ…å« Ray è„šæœ¬çš„ç¨‹åºï¼Œç”¨äºè°ƒç”¨ <code class="docutils literal notranslate"><span class="pre">ray.init()</span></code> å’Œä½¿ç”¨ Ray task æˆ– actorã€‚</p></li>
<li><p><strong>ä¾èµ–é¡¹</strong> æˆ– <strong>ç¯å¢ƒ</strong>ã€‚  åº”ç”¨ç¨‹åºéœ€è¦è¿è¡Œçš„ Ray è„šæœ¬ä¹‹å¤–çš„ä»»ä½•å†…å®¹ï¼ŒåŒ…æ‹¬æ–‡ä»¶ã€åŒ…å’Œç¯å¢ƒå˜é‡ã€‚</p></li>
<li><p><strong>æ–‡ä»¶</strong>ã€‚ ä½ çš„ Ray åº”ç”¨ç¨‹åºè¿è¡Œæ‰€éœ€çš„ä»£ç æ–‡ä»¶ã€æ•°æ®æ–‡ä»¶æˆ–å…¶ä»–æ–‡ä»¶ã€‚</p></li>
<li><p><strong>åŒ…</strong>ã€‚ Ray åº”ç”¨ç¨‹åºæ‰€éœ€çš„å¤–éƒ¨åº“æˆ–å¯æ‰§è¡Œæ–‡ä»¶ï¼Œé€šå¸¸é€šè¿‡ <code class="docutils literal notranslate"><span class="pre">pip</span></code> æˆ– <code class="docutils literal notranslate"><span class="pre">conda</span></code> å®‰è£…ã€‚</p></li>
<li><p><strong>æœ¬åœ°æœºå™¨</strong> å’Œ <strong>é›†ç¾¤</strong>ã€‚  é€šå¸¸ï¼Œæ‚¨å¯èƒ½å¸Œæœ›å°† Ray é›†ç¾¤è®¡ç®—æœºå™¨/pod ä¸å¤„ç†å’Œæäº¤åº”ç”¨ç¨‹åºçš„æœºå™¨/pod åˆ†å¼€ã€‚æ‚¨å¯ä»¥é€šè¿‡ <a class="reference internal" href="../cluster/running-applications/job-submission/index.html#jobs-overview"><span class="std std-ref">Ray ä½œä¸šæäº¤æœºåˆ¶</span></a> æäº¤ Ray ä½œä¸šï¼Œæˆ–ä½¿ç”¨ <code class="xref py py-obj docutils literal notranslate"><span class="pre">ray</span> <span class="pre">attach</span></code> ä»¥äº¤äº’æ–¹å¼è¿æ¥åˆ°é›†ç¾¤ã€‚ æˆ‘ä»¬å°†æäº¤ä½œä¸šçš„æœºå™¨ç§°ä¸º <em>æœ¬åœ°æœºå™¨</em>.</p></li>
<li><p><strong>ä½œä¸š</strong>.  <a class="reference internal" href="../cluster/key-concepts.html#cluster-clients-and-jobs"><span class="std std-ref">Ray ä½œä¸š</span></a> æ˜¯å•ä¸ªåº”ç”¨ç¨‹åºï¼šå®ƒæ˜¯æ¥è‡ªåŒä¸€è„šæœ¬çš„ Ray ä»»åŠ¡ã€å¯¹è±¡å’Œ actor çš„é›†åˆã€‚</p></li>
</ul>
</section>
<section id="ray-cluster-launcher">
<span id="using-the-cluster-launcher"></span><h2>ä½¿ç”¨ Ray Cluster launcher å‡†å¤‡ç¯å¢ƒ<a class="headerlink" href="#ray-cluster-launcher" title="Permalink to this headline">#</a></h2>
<p>è®¾ç½®ä¾èµ–é¡¹çš„ç¬¬ä¸€ç§æ–¹æ³•æ˜¯åœ¨å¯åŠ¨ Ray è¿è¡Œæ—¶ä¹‹å‰å‡†å¤‡è·¨é›†ç¾¤çš„å•ä¸€ç¯å¢ƒã€‚</p>
<ul class="simple">
<li><p>æ‚¨å¯ä»¥å°†æ‰€æœ‰æ–‡ä»¶å’Œä¾èµ–é¡¹æ„å»ºåˆ°å®¹å™¨æ˜ åƒä¸­ï¼Œå¹¶åœ¨ <a class="reference internal" href="../cluster/vms/references/ray-cluster-configuration.html#cluster-config"><span class="std std-ref">Cluster YAML é…ç½®é¡¹</span></a> æŒ‡å®šã€‚</p></li>
<li><p>æ‚¨è¿˜å¯ä»¥åœ¨Ray Cluster é…ç½®æ–‡ä»¶ï¼ˆ<a class="reference internal" href="../cluster/vms/references/ray-cluster-configuration.html#cluster-configuration-setup-commands"><span class="std std-ref">å‚è€ƒ</span></a>ï¼‰ä½¿ç”¨ <code class="docutils literal notranslate"><span class="pre">setup_commands</span></code> å®‰è£…ä¾èµ–é¡¹ï¼›è¿™äº›å‘½ä»¤å°†åœ¨æ¯ä¸ªèŠ‚ç‚¹åŠ å…¥é›†ç¾¤æ—¶è¿è¡Œã€‚
è¯·æ³¨æ„ï¼Œå¯¹äºç”Ÿäº§è®¾ç½®ï¼Œå»ºè®®å°†ä»»ä½•å¿…è¦çš„è½¯ä»¶åŒ…æ„å»ºåˆ°å®¹å™¨æ˜ åƒä¸­ã€‚</p></li>
<li><p>æ‚¨å¯ä»¥ä½¿ç”¨ä½¿ç”¨ <code class="docutils literal notranslate"><span class="pre">ray</span> <span class="pre">rsync_up</span></code> (<a class="reference internal" href="../cluster/vms/references/ray-cluster-cli.html#ray-rsync"><span class="std std-ref">å‚è€ƒ</span></a>) å°†æœ¬åœ°æ–‡ä»¶æ¨é€åˆ°é›†ç¾¤ã€‚</p></li>
</ul>
</section>
<section id="runtime-environments">
<span id="id3"></span><h2>è¿è¡Œç¯å¢ƒ<a class="headerlink" href="#runtime-environments" title="Permalink to this headline">#</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>æ­¤ç‰¹æ€§éœ€è¦ä½¿ç”¨ <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">&quot;ray[default]&quot;</span></code> å®Œæ•´å®‰è£… Ray ã€‚æ­¤åŠŸèƒ½ä» Ray 1.4.0 å¼€å§‹å¯ç”¨ï¼Œç›®å‰æ”¯æŒ macOS å’Œ Linuxï¼Œåœ¨ Windows ä¸Šæä¾›æµ‹è¯•ç‰ˆæ”¯æŒã€‚</p>
</div>
<p>è®¾ç½®ä¾èµ–é¡¹çš„ç¬¬äºŒç§æ–¹æ³•æ˜¯åœ¨ Ray è¿è¡Œæ—¶åŠ¨æ€å®‰è£…å®ƒä»¬ã€‚</p>
<p><strong>è¿è¡Œæ—¶ç¯å¢ƒ</strong> æè¿°äº† Ray åº”ç”¨ç¨‹åºè¿è¡Œæ—¶æ‰€éœ€çš„ä¾èµ–é¡¹ï¼ŒåŒ…æ‹¬ <a class="reference internal" href="#runtime-environments-api-ref"><span class="std std-ref">æ–‡ä»¶ã€åŒ…ã€ç¯å¢ƒå˜é‡ç­‰</span></a>ã€‚
å®ƒåœ¨è¿è¡Œæ—¶åŠ¨æ€å®‰è£…åœ¨é›†ç¾¤ä¸Šå¹¶ç¼“å­˜ä»¥ä¾›å°†æ¥ä½¿ç”¨ ï¼ˆæœ‰å…³ç”Ÿå‘½å‘¨æœŸçš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… <a class="reference internal" href="#runtime-environments-caching"><span class="std std-ref">ç¼“å­˜å’Œåƒåœ¾æ”¶é›†</span></a>ï¼‰ã€‚</p>
<p>å¦‚æœä½¿ç”¨äº† <a class="reference internal" href="#using-the-cluster-launcher"><span class="std std-ref">Ray é›†ç¾¤å¯åŠ¨å™¨</span></a> ï¼Œåˆ™å¯ä»¥åœ¨å‡†å¤‡å¥½çš„ç¯å¢ƒä¸Šä½¿ç”¨è¿è¡Œæ—¶ç¯å¢ƒã€‚
ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ Cluster å¯åŠ¨å™¨å®‰è£…ä¸€ç»„åŸºæœ¬è½¯ä»¶åŒ…ï¼Œç„¶åä½¿ç”¨è¿è¡Œæ—¶ç¯å¢ƒå®‰è£…å…¶ä»–è½¯ä»¶åŒ…ã€‚
ä¸åŸºæœ¬é›†ç¾¤ç¯å¢ƒç›¸æ¯”ï¼Œè¿è¡Œæ—¶ç¯å¢ƒä»…å¯¹ Ray è¿›ç¨‹æœ‰æ•ˆã€‚ï¼ˆä¾‹å¦‚ï¼Œå¦‚æœä½¿ç”¨è¿è¡Œæ—¶ç¯å¢ƒ æŒ‡å®šçš„ <code class="docutils literal notranslate"><span class="pre">pip</span></code> åŒ… <code class="docutils literal notranslate"><span class="pre">my_pkg</span></code>ï¼Œåˆ™åœ¨ Ray ä»»åŠ¡ã€ actor æˆ–ä½œä¸šä¹‹å¤–è°ƒç”¨ <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">my_pkg</span></code> è¯­å¥å°†å¤±è´¥ã€‚ï¼‰</p>
<p>è¿è¡Œæ—¶ç¯å¢ƒè¿˜å…è®¸æ‚¨åœ¨é•¿æœŸè¿è¡Œçš„ Ray é›†ç¾¤ä¸Šè®¾ç½®æ¯ä¸ªä»»åŠ¡ã€actor å’Œæ¯ä¸ªä½œä¸šçš„ä¾èµ–é¡¹ã€‚</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">ray</span>

<span class="n">runtime_env</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;pip&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;emoji&quot;</span><span class="p">]}</span>

<span class="n">ray</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="n">runtime_env</span><span class="o">=</span><span class="n">runtime_env</span><span class="p">)</span>

<span class="nd">@ray</span><span class="o">.</span><span class="n">remote</span>
<span class="k">def</span> <span class="nf">f</span><span class="p">():</span>
  <span class="kn">import</span> <span class="nn">emoji</span>
  <span class="k">return</span> <span class="n">emoji</span><span class="o">.</span><span class="n">emojize</span><span class="p">(</span><span class="s1">&#39;Python is :thumbs_up:&#39;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">ray</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">remote</span><span class="p">()))</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Python is ğŸ‘
</pre></div>
</div>
<p>è¿è¡Œæ—¶ç¯å¢ƒå¯ä»¥ç”¨ Python  <code class="xref py py-obj docutils literal notranslate"><span class="pre">dict</span></code> æ¥æè¿°ï¼š</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">runtime_env</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;pip&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;emoji&quot;</span><span class="p">],</span>
    <span class="s2">&quot;env_vars&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;TF_WARNINGS&quot;</span><span class="p">:</span> <span class="s2">&quot;none&quot;</span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>æˆ–è€…ï¼Œä½ å¯ä»¥ä½¿ç”¨ <a class="reference internal" href="api/doc/ray.runtime_env.RuntimeEnv.html#ray.runtime_env.RuntimeEnv" title="ray.runtime_env.RuntimeEnv"><code class="xref py py-class docutils literal notranslate"><span class="pre">ray.runtime_env.RuntimeEnv</span></code></a>ï¼š</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">ray.runtime_env</span> <span class="kn">import</span> <span class="n">RuntimeEnv</span>
<span class="n">runtime_env</span> <span class="o">=</span> <span class="n">RuntimeEnv</span><span class="p">(</span>
    <span class="n">pip</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;emoji&quot;</span><span class="p">],</span>
    <span class="n">env_vars</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;TF_WARNINGS&quot;</span><span class="p">:</span> <span class="s2">&quot;none&quot;</span><span class="p">}</span>
<span class="p">)</span>
</pre></div>
</div>
<p>æ¬²äº†è§£æ›´å¤šç¤ºä¾‹ï¼Œè¯·è·³è½¬è‡³ <a class="reference internal" href="#runtime-environments-api-ref"><span class="std std-ref">API å‚è€ƒ</span></a>ã€‚</p>
<p>æ‚¨å¯ä»¥ä¸ºä¸¤ä¸ªä¸»è¦èŒƒå›´æŒ‡å®šè¿è¡Œæ—¶ç¯å¢ƒï¼š</p>
<ul class="simple">
<li><p><a class="reference internal" href="#rte-per-job"><span class="std std-ref">æ¯ä¸ª Job</span></a>ï¼Œä»¥åŠ</p></li>
<li><p><a class="reference internal" href="#rte-per-task-actor"><span class="std std-ref">åœ¨ä¸€ä¸ª job å†…çš„æ¯ä¸ª Task/Actor</span></a>ã€‚</p></li>
</ul>
<section id="rte-per-job">
<span id="id4"></span><h3>æ¯ä¸ªä½œä¸šæŒ‡å®šè¿è¡Œæ—¶ç¯å¢ƒ<a class="headerlink" href="#rte-per-job" title="Permalink to this headline">#</a></h3>
<p>æ‚¨å¯ä»¥ä¸ºæ•´ä¸ªä½œä¸šæŒ‡å®šè¿è¡Œç¯å¢ƒï¼Œæ— è®ºæ˜¯ç›´æ¥åœ¨é›†ç¾¤ä¸Šè¿è¡Œè„šæœ¬ï¼Œè¿˜æ˜¯ä½¿ç”¨ <a class="reference internal" href="../cluster/running-applications/job-submission/index.html#jobs-overview"><span class="std std-ref">Ray ä½œä¸š API</span></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Option 1: Starting a single-node local Ray cluster or connecting to existing local cluster</span>
<span class="n">ray</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="n">runtime_env</span><span class="o">=</span><span class="n">runtime_env</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Option 2: Using Ray Jobs API (Python SDK)</span>
<span class="kn">from</span> <span class="nn">ray.job_submission</span> <span class="kn">import</span> <span class="n">JobSubmissionClient</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">JobSubmissionClient</span><span class="p">(</span><span class="s2">&quot;http://&lt;head-node-ip&gt;:8265&quot;</span><span class="p">)</span>
<span class="n">job_id</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">submit_job</span><span class="p">(</span>
    <span class="n">entrypoint</span><span class="o">=</span><span class="s2">&quot;python my_ray_script.py&quot;</span><span class="p">,</span>
    <span class="n">runtime_env</span><span class="o">=</span><span class="n">runtime_env</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Option 3: Using Ray Jobs API (CLI). (Note: can use --runtime-env to pass a YAML file instead of an inline JSON string.)</span>
$ ray job submit --address<span class="o">=</span><span class="s2">&quot;http://&lt;head-node-ip&gt;:8265&quot;</span> --runtime-env-json<span class="o">=</span><span class="s1">&#39;{&quot;working_dir&quot;: &quot;/data/my_files&quot;, &quot;pip&quot;: [&quot;emoji&quot;]}&#39;</span> -- python my_ray_script.py
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>å¦‚æœä½¿ç”¨ Ray Jobs APIï¼ˆPython SDK æˆ– CLIï¼‰ï¼Œè¯·åœ¨è°ƒç”¨ <code class="docutils literal notranslate"><span class="pre">submit_job</span></code> æˆ–è€… <code class="docutils literal notranslate"><span class="pre">ray</span> <span class="pre">job</span> <span class="pre">submit</span></code> æŒ‡å®š <code class="docutils literal notranslate"><span class="pre">runtime_env</span></code> å‚æ•°ï¼Œè€Œä¸æ˜¯åœ¨å…¥å£ç‚¹è„šæœ¬ä¸­çš„ <code class="docutils literal notranslate"><span class="pre">ray.init()</span></code> è°ƒç”¨ä¸­æŒ‡å®šï¼ˆåœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ä¸º <code class="docutils literal notranslate"><span class="pre">my_ray_script.py</span></code>ï¼‰ã€‚</p>
<p>è¿™å¯ç¡®ä¿åœ¨è¿è¡Œå…¥å£ç‚¹è„šæœ¬ä¹‹å‰åœ¨é›†ç¾¤ä¸Šå®‰è£…è¿è¡Œæ—¶ç¯å¢ƒã€‚</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>ä½•æ—¶å®‰è£…è¿è¡Œç¯å¢ƒæœ‰ä¸¤ç§é€‰æ‹©ï¼š</p>
<ol class="arabic simple">
<li><p>ä¸€æ—¦ä½œä¸šå¼€å§‹ï¼ˆä¾‹å¦‚ï¼Œ <code class="docutils literal notranslate"><span class="pre">ray.init()</span></code> è¢«è°ƒç”¨ï¼‰ï¼Œä¾èµ–é¡¹å°†è¢«æ€¥åˆ‡åœ°ä¸‹è½½å’Œå®‰è£…ã€‚</p></li>
<li><p>ä»…å½“è°ƒç”¨ä»»åŠ¡æˆ–åˆ›å»º actor æ—¶æ‰ä¼šå®‰è£…ä¾èµ–é¡¹ã€‚</p></li>
</ol>
<p>é»˜è®¤æ˜¯é€‰é¡¹ 1ã€‚è¦å°†è¡Œä¸ºæ›´æ”¹ä¸ºé€‰é¡¹ 2ï¼Œè¯·æ·»åŠ  <code class="docutils literal notranslate"><span class="pre">&quot;eager_install&quot;:</span> <span class="pre">False``åˆ°</span> <span class="pre">``config</span></code> çš„ <code class="docutils literal notranslate"><span class="pre">runtime_env</span></code>ã€‚</p>
</div>
</section>
<section id="actor">
<span id="rte-per-task-actor"></span><h3>ä¸ºæ¯ä¸ªä»»åŠ¡æˆ–æ¯ä¸ª Actor æŒ‡å®šè¿è¡Œæ—¶<a class="headerlink" href="#actor" title="Permalink to this headline">#</a></h3>
<p>æ‚¨å¯ä»¥ä½¿ç”¨ <code class="docutils literal notranslate"><span class="pre">&#64;ray.remote</span></code> è£…é¥°å™¨æˆ–è€… <code class="docutils literal notranslate"><span class="pre">.options()</span></code> ä¸ºæ¯ä¸ª actor æˆ–æ¯ä¸ªä»»åŠ¡æŒ‡å®šä¸åŒçš„è¿è¡Œæ—¶ç¯å¢ƒï¼š</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Invoke a remote task that will run in a specified runtime environment.</span>
<span class="n">f</span><span class="o">.</span><span class="n">options</span><span class="p">(</span><span class="n">runtime_env</span><span class="o">=</span><span class="n">runtime_env</span><span class="p">)</span><span class="o">.</span><span class="n">remote</span><span class="p">()</span>

<span class="c1"># Instantiate an actor that will run in a specified runtime environment.</span>
<span class="n">actor</span> <span class="o">=</span> <span class="n">SomeClass</span><span class="o">.</span><span class="n">options</span><span class="p">(</span><span class="n">runtime_env</span><span class="o">=</span><span class="n">runtime_env</span><span class="p">)</span><span class="o">.</span><span class="n">remote</span><span class="p">()</span>

<span class="c1"># Specify a runtime environment in the task definition.  Future invocations via</span>
<span class="c1"># `g.remote()` will use this runtime environment unless overridden by using</span>
<span class="c1"># `.options()` as above.</span>
<span class="nd">@ray</span><span class="o">.</span><span class="n">remote</span><span class="p">(</span><span class="n">runtime_env</span><span class="o">=</span><span class="n">runtime_env</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">g</span><span class="p">():</span>
    <span class="k">pass</span>

<span class="c1"># Specify a runtime environment in the actor definition.  Future instantiations</span>
<span class="c1"># via `MyClass.remote()` will use this runtime environment unless overridden by</span>
<span class="c1"># using `.options()` as above.</span>
<span class="nd">@ray</span><span class="o">.</span><span class="n">remote</span><span class="p">(</span><span class="n">runtime_env</span><span class="o">=</span><span class="n">runtime_env</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">MyClass</span><span class="p">:</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>è¿™æ ·ï¼Œactor å’Œä»»åŠ¡å°±å¯ä»¥åœ¨è‡ªå·±çš„ç¯å¢ƒä¸­è¿è¡Œï¼Œä¸å—å‘¨å›´ç¯å¢ƒçš„å½±å“ã€‚ï¼ˆå‘¨å›´ç¯å¢ƒå¯èƒ½æ˜¯ä½œä¸šçš„è¿è¡Œæ—¶ç¯å¢ƒï¼Œä¹Ÿå¯èƒ½æ˜¯é›†ç¾¤çš„ç³»ç»Ÿç¯å¢ƒã€‚ï¼‰</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Ray ä¸ä¿è¯è¿è¡Œæ—¶ç¯å¢ƒå†²çªçš„ä»»åŠ¡å’Œ Actor ä¹‹é—´çš„å…¼å®¹æ€§ã€‚
ä¾‹å¦‚ï¼Œå¦‚æœè¿è¡Œæ—¶ç¯å¢ƒåŒ…å«æŸä¸ª <code class="docutils literal notranslate"><span class="pre">pip</span></code> åŒ…çš„ Actor å°è¯•ä¸ä½¿ç”¨è¯¥åŒ…çš„ä¸åŒç‰ˆæœ¬çš„ Actor è¿›è¡Œé€šä¿¡ï¼Œåˆ™å¯èƒ½ä¼šå¯¼è‡´æ„å¤–è¡Œä¸ºï¼Œä¾‹å¦‚è§£åŒ…é”™è¯¯ã€‚</p>
</div>
</section>
<section id="id5">
<h3>å¸¸è§å·¥ä½œæµç¨‹<a class="headerlink" href="#id5" title="Permalink to this headline">#</a></h3>
<p>æœ¬èŠ‚ä»‹ç»è¿è¡Œæ—¶ç¯å¢ƒçš„ä¸€äº›å¸¸è§ç”¨ä¾‹ã€‚è¿™äº›ç”¨ä¾‹å¹¶ä¸ç›¸äº’æ’æ–¥ï¼›ä¸‹é¢æè¿°çš„æ‰€æœ‰é€‰é¡¹éƒ½å¯ä»¥ç»„åˆåœ¨ä¸€ä¸ªè¿è¡Œæ—¶ç¯å¢ƒä¸­ã€‚</p>
<section id="workflow-local-files">
<span id="id6"></span><h4>ä½¿ç”¨æœ¬åœ°æ–‡ä»¶<a class="headerlink" href="#workflow-local-files" title="Permalink to this headline">#</a></h4>
<p>æ‚¨çš„ Ray åº”ç”¨ç¨‹åºå¯èƒ½ä¾èµ–æºæ–‡ä»¶æˆ–æ•°æ®æ–‡ä»¶ã€‚
å¯¹äºå¼€å‘å·¥ä½œæµç¨‹ï¼Œè¿™äº›æ–‡ä»¶å¯èƒ½ä½äºæ‚¨çš„æœ¬åœ°æœºå™¨ä¸Šï¼Œä½†å½“éœ€è¦å¤§è§„æ¨¡è¿è¡Œæ—¶ï¼Œæ‚¨éœ€è¦å°†å®ƒä»¬è½¬ç§»åˆ°è¿œç¨‹é›†ç¾¤ã€‚</p>
<p>ä»¥ä¸‹ç®€å•ç¤ºä¾‹è¯´æ˜å¦‚ä½•åœ¨é›†ç¾¤ä¸Šè·å–æœ¬åœ°æ–‡ä»¶ã€‚</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">ray</span>

<span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="s2">&quot;/tmp/runtime_env_working_dir&quot;</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;/tmp/runtime_env_working_dir/hello.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">hello_file</span><span class="p">:</span>
  <span class="n">hello_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;Hello World!&quot;</span><span class="p">)</span>

<span class="c1"># Specify a runtime environment for the entire Ray job</span>
<span class="n">ray</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="n">runtime_env</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;working_dir&quot;</span><span class="p">:</span> <span class="s2">&quot;/tmp/runtime_env_working_dir&quot;</span><span class="p">})</span>

<span class="c1"># Create a Ray task, which inherits the above runtime env.</span>
<span class="nd">@ray</span><span class="o">.</span><span class="n">remote</span>
<span class="k">def</span> <span class="nf">f</span><span class="p">():</span>
    <span class="c1"># The function will have its working directory changed to its node&#39;s</span>
    <span class="c1"># local copy of /tmp/runtime_env_working_dir.</span>
    <span class="k">return</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;hello.txt&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="n">ray</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">remote</span><span class="p">()))</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Hello World!
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>ä¸Šé¢çš„ä¾‹å­æ˜¯ä¸ºäº†åœ¨æœ¬åœ°æœºå™¨ä¸Šè¿è¡Œè€Œç¼–å†™çš„ï¼Œä½†æ˜¯å¯¹äºæ‰€æœ‰è¿™äº›ä¾‹å­ï¼Œåœ¨æŒ‡å®šè¦è¿æ¥çš„ Ray é›†ç¾¤æ—¶å®ƒä¹ŸåŒæ ·æœ‰æ•ˆ
ï¼ˆæ¯”å¦‚ï¼šä½¿ç”¨ <code class="docutils literal notranslate"><span class="pre">ray.init(&quot;ray://123.456.7.89:10001&quot;,</span> <span class="pre">runtime_env=...)</span></code> æˆ– <code class="docutils literal notranslate"><span class="pre">ray.init(address=&quot;auto&quot;,</span> <span class="pre">runtime_env=...)</span></code>ï¼‰ã€‚</p>
</div>
<p>æŒ‡å®šçš„æœ¬åœ°ç›®å½•å°†åœ¨ <code class="docutils literal notranslate"><span class="pre">ray.init()</span></code> è°ƒç”¨æ—¶è‡ªåŠ¨æ¨é€åˆ°é›†ç¾¤èŠ‚ç‚¹ã€‚</p>
<p>æ‚¨è¿˜å¯ä»¥é€šè¿‡è¿œç¨‹äº‘å­˜å‚¨ URI æŒ‡å®šæ–‡ä»¶ï¼›æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… <a class="reference internal" href="#remote-uris"><span class="std std-ref">è¿œç¨‹ URI</span></a>ã€‚</p>
</section>
<section id="conda-pip">
<h4>ä½¿ç”¨ <code class="docutils literal notranslate"><span class="pre">conda</span></code> æˆ– <code class="docutils literal notranslate"><span class="pre">pip</span></code> åŒ…<a class="headerlink" href="#conda-pip" title="Permalink to this headline">#</a></h4>
<p>æ‚¨çš„ Ray åº”ç”¨ç¨‹åºå¯èƒ½é€šè¿‡ <code class="docutils literal notranslate"><span class="pre">import</span></code> è¯­å¥ä¾èµ–äº† Python åŒ…ï¼ˆæ¯”å¦‚ï¼Œ<code class="docutils literal notranslate"><span class="pre">pendulum</span></code> æˆ– <code class="docutils literal notranslate"><span class="pre">requests</span></code>ï¼‰ã€‚</p>
<p>Ray é€šå¸¸å¸Œæœ›æ‰€æœ‰å¯¼å…¥çš„åŒ…éƒ½é¢„å…ˆå®‰è£…åœ¨é›†ç¾¤çš„æ¯ä¸ªèŠ‚ç‚¹ä¸Šï¼›ç‰¹åˆ«æ˜¯ï¼Œè¿™äº›åŒ…ä¸ä¼šè‡ªåŠ¨ä»æœ¬åœ°æœºå™¨è¿é€åˆ°é›†ç¾¤æˆ–ä»ä»»ä½•å­˜å‚¨åº“ä¸‹è½½ã€‚</p>
<p>ä½†æ˜¯ï¼Œä½¿ç”¨è¿è¡Œæ—¶ç¯å¢ƒï¼Œæ‚¨å¯ä»¥åŠ¨æ€æŒ‡å®šè¦åœ¨è™šæ‹Ÿç¯å¢ƒä¸­è‡ªåŠ¨ä¸‹è½½å¹¶å®‰è£…çš„åŒ…ï¼Œä»¥ä¾›æ‚¨çš„ Ray ä½œä¸šæˆ–ç‰¹å®šçš„ Ray ä»»åŠ¡æˆ– actor ä½¿ç”¨ã€‚</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">ray</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="c1"># This example runs on a local machine, but you can also do</span>
<span class="c1"># ray.init(address=..., runtime_env=...) to connect to a cluster.</span>
<span class="n">ray</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="n">runtime_env</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;pip&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;requests&quot;</span><span class="p">]})</span>

<span class="nd">@ray</span><span class="o">.</span><span class="n">remote</span>
<span class="k">def</span> <span class="nf">reqs</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://www.ray.io/&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">status_code</span>

<span class="nb">print</span><span class="p">(</span><span class="n">ray</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">reqs</span><span class="o">.</span><span class="n">remote</span><span class="p">()))</span><span class="mi">0</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>200
</pre></div>
</div>
<p>ä½ ä¹Ÿå¯ä»¥é€šè¿‡ Python åˆ—è¡¨æˆ–æœ¬åœ° <code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code> æ–‡ä»¶æŒ‡å®š <code class="docutils literal notranslate"><span class="pre">pip</span></code> ä¾èµ–é¡¹ã€‚
æˆ–è€…ï¼Œä½ å¯ä»¥æŒ‡å®š <code class="docutils literal notranslate"><span class="pre">conda</span></code> ç¯å¢ƒï¼Œå¯æ˜¯é€šè¿‡ Python è¯å…¸æˆ–è€…ä¸€ä¸ªæœ¬åœ°çš„ <code class="docutils literal notranslate"><span class="pre">environment.yml</span></code> æ–‡ä»¶ã€‚
è¿™ä¸ª conda ç¯å¢ƒå¯ä»¥åŒ…å« <code class="docutils literal notranslate"><span class="pre">pip</span></code> åŒ…ã€‚
æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹ <a class="reference internal" href="#runtime-environments-api-ref"><span class="std std-ref">API å‚è€ƒ</span></a>ã€‚</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>ç”±äº <code class="docutils literal notranslate"><span class="pre">runtime_env</span></code> ä¸­çš„åŒ…æ˜¯åœ¨è¿è¡Œæ—¶å®‰è£…ï¼Œå› æ­¤åœ¨æŒ‡å®šéœ€è¦ä»æºä»£ç æ„å»ºçš„ <code class="docutils literal notranslate"><span class="pre">conda</span></code> æˆ– <code class="docutils literal notranslate"><span class="pre">pip</span></code> åŒ…æ—¶è¦å°å¿ƒï¼Œå› ä¸ºè¿™å¯èƒ½ä¼šå¾ˆæ…¢ã€‚</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>å½“ä½¿ç”¨ <code class="docutils literal notranslate"><span class="pre">&quot;pip&quot;</span></code> å­—æ®µæ—¶ï¼ŒæŒ‡å®šçš„åŒ…å°†ä½¿ç”¨ <code class="docutils literal notranslate"><span class="pre">virtualenv</span></code> å®‰è£…åœ¨åŸºç¡€ç¯å¢ƒä¹‹ä¸Šï¼Œå› æ­¤é›†ç¾¤ä¸Šçš„ç°æœ‰åŒ…ä»ç„¶å¯ä»¥å¯¼å…¥ã€‚ ç›¸æ¯”ä¹‹ä¸‹ï¼Œå½“ä½¿ç”¨ <code class="docutils literal notranslate"><span class="pre">conda</span></code> å­—æ®µæ—¶ï¼Œæ‚¨çš„ Ray ä»»åŠ¡å’Œ actor å°†åœ¨éš”ç¦»çš„ç¯å¢ƒä¸­è¿è¡Œã€‚ <code class="docutils literal notranslate"><span class="pre">conda</span></code> å’Œ <code class="docutils literal notranslate"><span class="pre">pip</span></code> å­—æ®µä¸èƒ½åŒæ—¶åœ¨å•ä¸ª <code class="docutils literal notranslate"><span class="pre">runtime_env</span></code> ä¸­ä½¿ç”¨ã€‚</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">ray[default]</span></code> è½¯ä»¶åŒ…ï¼Œæœ¬èº«ä¼šè‡ªåŠ¨å®‰è£…åˆ°ç¯å¢ƒä¸­ã€‚ä»…å¯¹äº <code class="docutils literal notranslate"><span class="pre">conda</span></code> å­—æ®µï¼Œå¦‚æœä½¿ç”¨äº†ä»»ä½•å…¶ä»– Ray ç±»åº“ï¼ˆå¦‚ï¼šRay Serveï¼‰ï¼Œåˆ™éœ€è¦åœ¨è¿è¡Œæ—¶ç¯å¢ƒæŒ‡å®šç±»åº“ï¼ˆå¦‚ï¼š <code class="docutils literal notranslate"><span class="pre">runtime_env</span> <span class="pre">=</span> <span class="pre">{&quot;conda&quot;:</span> <span class="pre">{&quot;dependencies&quot;:</span> <span class="pre">[&quot;pytorch&quot;,</span> <span class="pre">&quot;pip&quot;,</span> <span class="pre">{&quot;pip&quot;:</span> <span class="pre">[&quot;requests&quot;,</span> <span class="pre">&quot;ray[serve]&quot;]}]}}</span></code>ã€‚ï¼‰</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">conda</span></code> ç¯å¢ƒå¿…é¡»ä¸ Ray é›†ç¾¤æ˜¯ç»Ÿä¸€ Python ç‰ˆæœ¬ã€‚ä¸è¦åœ¨ <code class="docutils literal notranslate"><span class="pre">conda</span></code> ä¾èµ–åˆ—å‡º <code class="docutils literal notranslate"><span class="pre">ray</span></code>ï¼Œå› ä¸ºå®ƒä¼šè‡ªåŠ¨å®‰è£…ã€‚</p>
</div>
</section>
<section id="id7">
<h4>ç±»åº“å¼€å‘<a class="headerlink" href="#id7" title="Permalink to this headline">#</a></h4>
<p>å‡è®¾æ‚¨æ­£åœ¨å¼€å‘ä¸€ä¸ª Ray ä¸Šçš„åº“ <code class="docutils literal notranslate"><span class="pre">my_module</span></code>ã€‚</p>
<p>å…¸å‹çš„è¿­ä»£å‘¨æœŸåŒ…æ‹¬ï¼š</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">my_module</span></code> å¯¹ <code class="docutils literal notranslate"><span class="pre">my_module</span></code> æºä»£ç è¿›è¡Œä¸€äº›æ›´æ”¹ã€‚</p></li>
<li><p>è¿è¡Œä¸€ä¸ª Ray è„šæœ¬æ¥æµ‹è¯•æ›´æ”¹ï¼Œå¯èƒ½åœ¨åˆ†å¸ƒå¼é›†ç¾¤ä¸Šã€‚</p></li>
</ol>
<p>è¦ç¡®ä¿ä½ çš„æœ¬åœ°æ›´æ”¹åœ¨æ‰€æœ‰ Ray workers ä¸Šæ˜¾ç¤ºå¹¶ä¸”å¯ä»¥æ­£ç¡®å¯¼å…¥ï¼Œè¯·ä½¿ç”¨ <code class="docutils literal notranslate"><span class="pre">py_modules</span></code> å­—æ®µã€‚</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">ray</span>
<span class="kn">import</span> <span class="nn">my_module</span>

<span class="n">ray</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="s2">&quot;ray://123.456.7.89:10001&quot;</span><span class="p">,</span> <span class="n">runtime_env</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;py_modules&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">my_module</span><span class="p">]})</span>

<span class="nd">@ray</span><span class="o">.</span><span class="n">remote</span>
<span class="k">def</span> <span class="nf">test_my_module</span><span class="p">():</span>
    <span class="c1"># No need to import my_module inside this function.</span>
    <span class="n">my_module</span><span class="o">.</span><span class="n">test</span><span class="p">()</span>

<span class="n">ray</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">remote</span><span class="p">())</span>
</pre></div>
</div>
<p>æ³¨æ„ï¼šæ­¤åŠŸèƒ½ç›®å‰ä»…é™äºåŒ…å« <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> æ–‡ä»¶çš„å•ä¸ªç›®å½•çš„åŒ…ã€‚å¯¹äºå•æ–‡ä»¶æ¨¡å—ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ <code class="docutils literal notranslate"><span class="pre">working_dir</span></code>ã€‚</p>
</section>
</section>
<section id="api">
<span id="runtime-environments-api-ref"></span><h3>API å‚è€ƒ<a class="headerlink" href="#api" title="Permalink to this headline">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">runtime_env</span></code> æ˜¯ä¸ª Python å­—å…¸æˆ–è€…ä¸€ä¸ª Python ç±» <a class="reference internal" href="api/doc/ray.runtime_env.RuntimeEnv.html#ray.runtime_env.RuntimeEnv" title="ray.runtime_env.RuntimeEnv"><code class="xref py py-class docutils literal notranslate"><span class="pre">ray.runtime_env.RuntimeEnv</span></code></a> åŒ…å«ä»¥ä¸‹ä¸€ä¸ªæˆ–å¤šä¸ªå­—æ®µï¼š</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">working_dir</span></code> (str): æŒ‡å®š Ray worker çš„å·¥ä½œç›®å½•ã€‚å¿…é¡»æ˜¯ (1) ä¸€ä¸ªå¤§å°æœ€å¤šåœ¨ 100 MiB çš„æœ¬åœ°å­˜åœ¨çš„ç›®å½•ï¼Œ(2) ä¸€ä¸ªè§£å‹åå¤§å°æœ€å¤š 100 MiB çš„å‹ç¼©æ–‡ä»¶ï¼ˆæ³¨æ„ï¼š<code class="docutils literal notranslate"><span class="pre">excludes</span></code> ä¼šä¸ç”Ÿæ•ˆï¼‰ï¼Œæˆ–è€… (3) åŒ…å«ä½œä¸šå·¥ä½œç›®å½•çš„è¿œç¨‹å­˜å‚¨å‹ç¼©æ–‡ä»¶çš„ URIã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… <a class="reference internal" href="#remote-uris"><span class="std std-ref">è¿œç¨‹ URI</span></a> ã€‚
æŒ‡å®šçš„ç›®å½•å°†ä¸‹è½½åˆ°é›†ç¾¤ä¸Šçš„æ¯ä¸ªèŠ‚ç‚¹ï¼Œå¹¶ä¸” Ray å·¥ä½œç¨‹åºå°†åœ¨å…¶èŠ‚ç‚¹çš„æ­¤ç›®å½•å‰¯æœ¬ä¸­å¯åŠ¨ã€‚</p>
<ul class="simple">
<li><p>ç¤ºä¾‹</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;.&quot;</span>&#160; <span class="pre">#</span> <span class="pre">cwd</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;/src/my_project&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;/src/my_project.zip&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;s3://path/to/my_dir.zip&quot;</span></code></p></li>
</ul>
</li>
</ul>
<p>æ³¨æ„ï¼šç›®å‰ä¸æ”¯æŒæŒ‰ä»»åŠ¡æˆ–æŒ‰ actor è®¾ç½®æœ¬åœ°ç›®å½•ï¼›åªèƒ½æŒ‰ä½œä¸šè¿›è¡Œè®¾ç½®ï¼ˆå³ï¼Œåœ¨ <code class="docutils literal notranslate"><span class="pre">ray.init()</span></code> ï¼‰ã€‚</p>
<p>æ³¨æ„ï¼šå¦‚æœæœ¬åœ°ç›®å½•åŒ…å« <code class="docutils literal notranslate"><span class="pre">.gitignore</span></code> æ–‡ä»¶ï¼Œåˆ™å…¶ä¸­æŒ‡å®šçš„æ–‡ä»¶å’Œè·¯å¾„ä¸ä¼šä¸Šä¼ åˆ°é›†ç¾¤ã€‚æ‚¨å¯ä»¥é€šè¿‡åœ¨æ‰§è¡Œä¸Šä¼ çš„æœºå™¨ä¸Šè®¾ç½®ç¯å¢ƒå˜é‡ <code class="xref py py-obj docutils literal notranslate"><span class="pre">RAY_RUNTIME_ENV_IGNORE_GITIGNORE=1</span></code> æ¥ç¦ç”¨æ­¤åŠŸèƒ½ã€‚</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">py_modules</span></code> (List[str|module]): æŒ‡å®šå¯åœ¨ Ray worker ä¸­å¯¼å…¥çš„ Python æ¨¡å—ã€‚  ï¼ˆæœ‰å…³æŒ‡å®šåŒ…çš„æ›´å¤šæ–¹æ³•ï¼Œå¦è¯·å‚é˜…ä¸‹é¢çš„ <code class="docutils literal notranslate"><span class="pre">pip</span></code> å’Œ <code class="docutils literal notranslate"><span class="pre">conda</span></code> å­—æ®µã€‚ï¼‰
æ¯ä¸ªæ¡ç›®å¿…é¡»æ˜¯ (1) æœ¬åœ°ç›®å½•çš„è·¯å¾„ã€(2) è¿œç¨‹ zip æ–‡ä»¶çš„ URIã€(3) Python æ¨¡å—å¯¹è±¡ã€æˆ–è€… (4) æœ¬åœ° <code class="xref py py-obj docutils literal notranslate"><span class="pre">whl</span></code> æ–‡ä»¶çš„è·¯å¾„ã€‚</p>
<ul class="simple">
<li><p>åˆ—è¡¨ä¸­æ¡ç›®çš„ç¤ºä¾‹ï¼š</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;.&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;/local_dependency/my_module&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;s3://bucket/my_module.zip&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">my_module</span> <span class="pre">#</span> <span class="pre">Assumes</span> <span class="pre">my_module</span> <span class="pre">has</span> <span class="pre">already</span> <span class="pre">been</span> <span class="pre">imported,</span> <span class="pre">e.g.</span> <span class="pre">via</span> <span class="pre">'import</span> <span class="pre">my_module'</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">my_module.whl</span></code></p></li>
</ul>
</li>
</ul>
<p>è¿™äº›æ¨¡å—å°†è¢«ä¸‹è½½åˆ°é›†ç¾¤ä¸Šçš„æ¯ä¸ªèŠ‚ç‚¹ã€‚</p>
<p>æ³¨æ„ï¼šç›®å‰ä¸æ”¯æŒæŒ‰ä»»åŠ¡æˆ–æŒ‰ actor è®¾ç½®é€‰é¡¹ (1)ã€(3) å’Œ (4)ï¼Œåªèƒ½æŒ‰ä½œä¸šè®¾ç½®ï¼ˆå³ï¼Œåœ¨ <code class="docutils literal notranslate"><span class="pre">ray.init()</span></code> ä¸­ï¼‰ã€‚</p>
<p>æ³¨æ„ï¼šå¯¹äºé€‰é¡¹ (1)ï¼Œå¦‚æœæœ¬åœ°ç›®å½•åŒ…å« <code class="docutils literal notranslate"><span class="pre">.gitignore</span></code> æ–‡ä»¶ï¼Œåˆ™ä¸ä¼šå°†å…¶ä¸­æŒ‡å®šçš„æ–‡ä»¶å’Œè·¯å¾„ä¸Šä¼ åˆ°é›†ç¾¤ã€‚æ‚¨å¯ä»¥é€šè¿‡åœ¨ <code class="xref py py-obj docutils literal notranslate"><span class="pre">RAY_RUNTIME_ENV_IGNORE_GITIGNORE=1</span></code> æ‰§è¡Œä¸Šä¼ çš„æœºå™¨ä¸Šè®¾ç½®ç¯å¢ƒå˜é‡æ¥ç¦ç”¨æ­¤åŠŸèƒ½ã€‚</p>
<p>æ³¨æ„ï¼šæ­¤åŠŸèƒ½ç›®å‰ä»…é™äºåŒ…å« <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> æ–‡ä»¶çš„å•ä¸ªç›®å½•çš„åŒ…ã€‚å¯¹äºå•æ–‡ä»¶æ¨¡å—ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ <code class="docutils literal notranslate"><span class="pre">working_dir</span></code>ã€‚</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">excludes</span></code> (List[str]): å½“ä½¿ç”¨äº† <code class="docutils literal notranslate"><span class="pre">working_dir</span></code> æˆ– <code class="docutils literal notranslate"><span class="pre">py_modules</span></code>ï¼ŒæŒ‡å®šè¦æ’é™¤åœ¨ä¸Šä¼ åˆ°é›†ç¾¤ä¹‹å¤–çš„æ–‡ä»¶æˆ–è·¯å¾„åˆ—è¡¨ã€‚
æ­¤å­—æ®µä½¿ç”¨ <code class="docutils literal notranslate"><span class="pre">.gitignore</span></code> æ–‡ä»¶ä½¿ç”¨çš„æ¨¡å¼åŒ¹é…è¯­æ³•ï¼šæœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… <a class="reference external" href="https://git-scm.com/docs/gitignore">https://git-scm.com/docs/gitignore</a>ã€‚
æ³¨æ„ï¼šæ ¹æ® <code class="docutils literal notranslate"><span class="pre">.gitignore</span></code> è¯­æ³•ï¼Œå¦‚æœæ¨¡å¼çš„å¼€å¤´æˆ–ä¸­é—´ï¼ˆæˆ–ä¸¤è€…ï¼‰æœ‰åˆ†éš”ç¬¦ï¼ˆ<code class="docutils literal notranslate"><span class="pre">/</span></code>ï¼‰ï¼Œåˆ™è¯¥æ¨¡å¼ç›¸å¯¹äº <code class="docutils literal notranslate"><span class="pre">working_dir</span></code> çš„çº§åˆ«è¿›è¡Œè§£é‡Šã€‚
ç‰¹åˆ«æ˜¯ï¼Œä½ ä¸åº”è¯¥åœ¨ <code class="xref py py-obj docutils literal notranslate"><span class="pre">excludes</span></code> ä½¿ç”¨ç»å¯¹è·¯å¾„ï¼ˆä¾‹å¦‚ <code class="xref py py-obj docutils literal notranslate"><span class="pre">/Users/my_working_dir/subdir/</span></code>ï¼‰ï¼›ç›¸åï¼Œä½ åº”è¯¥ä½¿ç”¨ç›¸å¯¹è·¯å¾„ <code class="xref py py-obj docutils literal notranslate"><span class="pre">/subdir/`ï¼ˆè¿™é‡Œå†™æˆ</span> <span class="pre">`/</span></code> å¼€å¤´ï¼Œä»¥åŒ¹é…åªæœ‰é¡¶çº§ <code class="xref py py-obj docutils literal notranslate"><span class="pre">subdir</span></code> ç›®å½•ï¼Œè€Œä¸æ˜¯æ‰€æœ‰çº§åˆ«çš„æ‰€æœ‰åä¸º <code class="xref py py-obj docutils literal notranslate"><span class="pre">subdir</span></code> çš„ç›®å½•ã€‚ï¼‰</p>
<ul class="simple">
<li><p>ç¤ºä¾‹: <code class="docutils literal notranslate"><span class="pre">{&quot;working_dir&quot;:</span> <span class="pre">&quot;/Users/my_working_dir/&quot;,</span> <span class="pre">&quot;excludes&quot;:</span> <span class="pre">[&quot;my_file.txt&quot;,</span> <span class="pre">&quot;/subdir/,</span> <span class="pre">&quot;path/to/dir&quot;,</span> <span class="pre">&quot;*.log&quot;]}</span></code></p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">pip</span></code> (dict | List[str] | str): (1) pip <a class="reference external" href="https://pip.pypa.io/en/stable/cli/pip_install/#requirement-specifiers">requirements specifiers</a> åˆ—è¡¨ï¼Œ (2) åŒ…å«æœ¬åœ° pip
<a class="reference external" href="https://pip.pypa.io/en/stable/user_guide/#requirements-files">â€œrequirements.txtâ€</a> æ–‡ä»¶è·¯å¾„çš„å­—ç¬¦ä¸²ï¼Œæˆ–è€… (3) å…·æœ‰ä¸‰ä¸ªå­—æ®µçš„ python å­—å…¸ï¼š (a) <code class="docutils literal notranslate"><span class="pre">packages</span></code> (å¿…é¡»ï¼Œ List[str]): pip åŒ…åˆ—è¡¨ï¼Œ
(b) <code class="docutils literal notranslate"><span class="pre">pip_check</span></code> (å¯é€‰, bool): æ˜¯å¦åœ¨ pip install ç»“æŸæ—¶å¯ç”¨ <a class="reference external" href="https://pip.pypa.io/en/stable/cli/pip_check/">pip check</a> ï¼Œé»˜è®¤ä¸º <code class="docutils literal notranslate"><span class="pre">False</span></code>ã€‚
(c) <code class="docutils literal notranslate"><span class="pre">pip_version</span></code> (å¯é€‰, str): pip çš„ç‰ˆæœ¬ï¼› Ray å°†åœ¨  <code class="docutils literal notranslate"><span class="pre">pip_version</span></code> å‰é¢æ‹¼å†™ â€œpipâ€ åŒ…åç§°ä»¥å½¢æˆæœ€ç»ˆçš„éœ€æ±‚å­—ç¬¦ä¸²ã€‚
requirement å®šä¹‰è¯­æ³•åœ¨ <a class="reference external" href="https://www.python.org/dev/peps/pep-0508/">PEP 508</a> ä¸­æœ‰è¯¦ç»†è¯´æ˜ã€‚
è¿™å°†åœ¨è¿è¡Œæ—¶å®‰è£…åœ¨ Ray worker ä¸Šã€‚ é›†ç¾¤é¢„å®‰è£…ç¯å¢ƒä¸­çš„åŒ…ä»ç„¶å¯ç”¨ã€‚
è¦ä½¿ç”¨åƒ Ray Serve æˆ– Ray Tune è¿™æ ·çš„åº“ï¼Œä½ éœ€è¦åœ¨è¿™é‡ŒåŒ…å« <code class="docutils literal notranslate"><span class="pre">&quot;ray[serve]&quot;</span></code> æˆ– <code class="docutils literal notranslate"><span class="pre">&quot;ray[tune]&quot;</span></code>ã€‚
Ray ç‰ˆæœ¬å¿…é¡»ä¸é›†ç¾¤çš„ç‰ˆæœ¬åŒ¹é…ï¼Œå› æ­¤æ‚¨å¯èƒ½ä¸åº”è¯¥æ‰‹åŠ¨æŒ‡å®šå®ƒä»¬ã€‚</p>
<ul class="simple">
<li><p>ç¤ºä¾‹: <code class="docutils literal notranslate"><span class="pre">[&quot;requests==1.0.0&quot;,</span> <span class="pre">&quot;aiohttp&quot;,</span> <span class="pre">&quot;ray[serve]&quot;]</span></code></p></li>
<li><p>ç¤ºä¾‹: <code class="docutils literal notranslate"><span class="pre">&quot;./requirements.txt&quot;</span></code></p></li>
<li><p>ç¤ºä¾‹: <code class="docutils literal notranslate"><span class="pre">{&quot;packages&quot;:[&quot;tensorflow&quot;,</span> <span class="pre">&quot;requests&quot;],</span> <span class="pre">&quot;pip_check&quot;:</span> <span class="pre">False,</span> <span class="pre">&quot;pip_version&quot;:</span> <span class="pre">&quot;==22.0.2;python_version=='3.8.11'&quot;}</span></code></p></li>
</ul>
<p>æŒ‡å®š <code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code> æ–‡ä»¶è·¯å¾„æ—¶ï¼Œæ–‡ä»¶å¿…é¡»å­˜åœ¨äºæœ¬åœ°è®¡ç®—æœºä¸Šï¼Œå¹¶ä¸”å¿…é¡»æ˜¯ç›¸å¯¹äºæœ¬åœ°å½“å‰å·¥ä½œç›®å½•çš„æœ‰æ•ˆç»å¯¹è·¯å¾„æˆ–ç›¸å¯¹æ–‡ä»¶è·¯å¾„ï¼Œè€Œ <em>ä¸æ˜¯</em> ç›¸å¯¹äº <code class="xref py py-obj docutils literal notranslate"><span class="pre">runtime_env</span></code> æŒ‡å®šçš„ <code class="xref py py-obj docutils literal notranslate"><span class="pre">working_dir</span></code>ã€‚
æ­¤å¤–ï¼Œä¸æ”¯æŒåœ¨ <code class="xref py py-obj docutils literal notranslate"><span class="pre">requirements.txt</span></code> æ–‡ä»¶ä¸­å¼•ç”¨æœ¬åœ°æ–‡ä»¶ã€‚ï¼ˆå¦‚ï¼š<code class="docutils literal notranslate"><span class="pre">-r</span> <span class="pre">./my-laptop/more-requirements.txt</span></code>ï¼Œ<code class="docutils literal notranslate"><span class="pre">./my-pkg.whl</span></code>ï¼‰ã€‚</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">conda</span></code> (dict | str): (1) ç¤º conda ç¯å¢ƒ YAML çš„å­—å…¸ï¼Œ (2) åŒ…å«æœ¬åœ°
<a class="reference external" href="https://conda.io/projects/conda/en/latest/user-guide/tasks/manage-environments.html#create-env-file-manually">conda â€œenvironment.ymlâ€</a> æ–‡ä»¶çš„è·¯å¾„å­—ç¬¦ä¸²ï¼Œ
æˆ– (3) å·²å®‰è£…åœ¨é›†ç¾¤ä¸­æ¯ä¸ªèŠ‚ç‚¹ä¸Šçš„æœ¬åœ° conda ç¯å¢ƒçš„åç§°ï¼ˆä¾‹å¦‚ï¼Œ <code class="docutils literal notranslate"><span class="pre">&quot;pytorch_p36&quot;</span></code>ï¼‰ã€‚
å‰ä¸¤ç§æƒ…å†µä¸‹ï¼ŒRay å’Œ Python ä¾èµ–é¡¹å°†è‡ªåŠ¨æ³¨å…¥åˆ°ç¯å¢ƒä¸­ä»¥ç¡®ä¿å…¼å®¹æ€§ï¼Œå› æ­¤æ— éœ€æ‰‹åŠ¨åŒ…å«å®ƒä»¬ã€‚
Python å’Œ Ray ç‰ˆæœ¬å¿…é¡»ä¸é›†ç¾¤çš„ç‰ˆæœ¬åŒ¹é…ï¼Œå› æ­¤æ‚¨å¯èƒ½ä¸åº”è¯¥æ‰‹åŠ¨æŒ‡å®šå®ƒä»¬ã€‚
è¯·æ³¨æ„ï¼Œ<code class="docutils literal notranslate"><span class="pre">conda</span></code> å’Œ <code class="docutils literal notranslate"><span class="pre">pip</span></code> çš„ <code class="docutils literal notranslate"><span class="pre">runtime_env</span></code> é”®ä¸èƒ½åŒæ—¶æŒ‡å®šâ€”è¦ä¸€èµ·ä½¿ç”¨å®ƒä»¬ï¼Œè¯·ä½¿ç”¨ <code class="docutils literal notranslate"><span class="pre">conda</span></code> å¹¶åœ¨ conda çš„ <code class="docutils literal notranslate"><span class="pre">environment.yaml</span></code> ä¸­çš„ <code class="docutils literal notranslate"><span class="pre">&quot;pip&quot;</span></code> å­—æ®µä¸­æ·»åŠ æ‚¨çš„ pip ä¾èµ–é¡¹ã€‚</p>
<ul class="simple">
<li><p>ç¤ºä¾‹: <code class="docutils literal notranslate"><span class="pre">{&quot;dependencies&quot;:</span> <span class="pre">[&quot;pytorch&quot;,</span> <span class="pre">&quot;torchvision&quot;,</span> <span class="pre">&quot;pip&quot;,</span> <span class="pre">{&quot;pip&quot;:</span> <span class="pre">[&quot;pendulum&quot;]}]}</span></code></p></li>
<li><p>ç¤ºä¾‹: <code class="docutils literal notranslate"><span class="pre">&quot;./environment.yml&quot;</span></code></p></li>
<li><p>ç¤ºä¾‹: <code class="docutils literal notranslate"><span class="pre">&quot;pytorch_p36&quot;</span></code></p></li>
</ul>
<p>æŒ‡å®š <code class="docutils literal notranslate"><span class="pre">environment.yml</span></code> æ–‡ä»¶è·¯å¾„æ—¶ï¼Œæ–‡ä»¶å¿…é¡»å­˜åœ¨äºæœ¬åœ°è®¡ç®—æœºä¸Šï¼Œå¹¶ä¸”å¿…é¡»æ˜¯ç›¸å¯¹äºæœ¬åœ°å½“å‰å·¥ä½œç›®å½•çš„æœ‰æ•ˆç»å¯¹è·¯å¾„æˆ–ç›¸å¯¹æ–‡ä»¶è·¯å¾„ï¼Œè€Œ <em>ä¸æ˜¯</em> ç›¸å¯¹äº <code class="xref py py-obj docutils literal notranslate"><span class="pre">runtime_env</span></code> æŒ‡å®šçš„ <code class="xref py py-obj docutils literal notranslate"><span class="pre">working_dir</span></code>ã€‚
æ­¤å¤–ï¼Œä¸æ”¯æŒåœ¨ <code class="xref py py-obj docutils literal notranslate"><span class="pre">environment.yml</span></code> æ–‡ä»¶ä¸­å¼•ç”¨æœ¬åœ°æ–‡ä»¶ã€‚</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">env_vars</span></code> (Dict[str, str]): è¦è®¾ç½®çš„ç¯å¢ƒå˜é‡ã€‚  é›†ç¾¤ä¸Šå·²ç»è®¾ç½®çš„ç¯å¢ƒå˜é‡ä»æ—§å¯¹äº Ray worker å¯è§ï¼›æ‰€ä»¥ä¸éœ€è¦åœ¨ <code class="docutils literal notranslate"><span class="pre">env_vars</span></code> å­—æ®µä¸­åŒ…å« <code class="docutils literal notranslate"><span class="pre">os.environ</span></code> æˆ–ç±»ä¼¼çš„å†…å®¹ã€‚
é»˜è®¤ï¼Œè¿™äº›ç¯å¢ƒå˜é‡ä¼šè¦†ç›–é›†ç¾¤ä¸Šç›¸åŒåç§°çš„ç¯å¢ƒå˜é‡ã€‚
ä½ å¯ä»¥ä½¿ç”¨ ${ENV_VAR} å¼•ç”¨ç°æœ‰çš„ç¯å¢ƒå˜é‡æ¥å®ç°è¿½åŠ è¡Œä¸ºã€‚
å¦‚æœç¯å¢ƒå˜é‡ä¸å­˜åœ¨ï¼Œå®ƒä¼šå˜æˆä¸€ä¸ªç©ºå­—ç¬¦ä¸² <code class="xref py py-obj docutils literal notranslate"><span class="pre">&quot;&quot;</span></code>ã€‚</p>
<ul class="simple">
<li><p>ç¤ºä¾‹: <code class="docutils literal notranslate"><span class="pre">{&quot;OMP_NUM_THREADS&quot;:</span> <span class="pre">&quot;32&quot;,</span> <span class="pre">&quot;TF_WARNINGS&quot;:</span> <span class="pre">&quot;none&quot;}</span></code></p></li>
<li><p>ç¤ºä¾‹: <code class="docutils literal notranslate"><span class="pre">{&quot;LD_LIBRARY_PATH&quot;:</span> <span class="pre">&quot;${LD_LIBRARY_PATH}:/home/admin/my_lib&quot;}</span></code></p></li>
<li><p>ä¸å­˜åœ¨çš„å˜é‡ç¤ºä¾‹: <code class="docutils literal notranslate"><span class="pre">{&quot;ENV_VAR_NOT_EXIST&quot;:</span> <span class="pre">&quot;${ENV_VAR_NOT_EXIST}:/home/admin/my_lib&quot;}</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">ENV_VAR_NOT_EXIST=&quot;:/home/admin/my_lib&quot;</span></code>.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">container</span></code> (dict): éœ€è¦ç»™å®šçš„ (Docker) æ˜ åƒï¼Œ, å·¥ä½œè¿›ç¨‹å°†åœ¨å…·æœ‰æ­¤æ˜ åƒçš„å®¹å™¨ä¸­è¿è¡Œã€‚
<code class="xref py py-obj docutils literal notranslate"><span class="pre">worker_paht</span></code> æ˜¯é»˜è®¤çš„ <code class="xref py py-obj docutils literal notranslate"><span class="pre">default_worker.py</span></code> è·¯å¾„ã€‚åªæœ‰å½“å®¹å™¨ä¸­çš„ ray å®‰è£…ç›®å½•ä¸ raylet ä¸»æœºä¸åŒæ—¶æ‰éœ€è¦ã€‚
<code class="xref py py-obj docutils literal notranslate"><span class="pre">run_options</span></code> åˆ—è¡¨è§„èŒƒåœ¨ <a class="reference external" href="https://docs.docker.com/engine/reference/run/">è¿™é‡Œ</a>ã€‚</p>
<ul class="simple">
<li><p>ç¤ºä¾‹: <code class="docutils literal notranslate"><span class="pre">{&quot;image&quot;:</span> <span class="pre">&quot;anyscale/ray-ml:nightly-py38-cpu&quot;,</span> <span class="pre">&quot;worker_path&quot;:</span> <span class="pre">&quot;/root/python/ray/workers/default_worker.py&quot;,</span> <span class="pre">&quot;run_options&quot;:</span> <span class="pre">[&quot;--cap-drop</span> <span class="pre">SYS_ADMIN&quot;,&quot;--log-level=debug&quot;]}</span></code></p></li>
</ul>
<p>æ³¨æ„ï¼š<code class="docutils literal notranslate"><span class="pre">container</span></code> ç›®å‰æ˜¯å®éªŒæ€§çš„ã€‚å¦‚æœæ‚¨æœ‰ä¸€äº›è¦æ±‚æˆ–é‡åˆ°ä»»ä½•é—®é¢˜ï¼Œè¯·åœ¨ <a class="reference external" href="https://github.com/ray-project/ray/issues">github</a> æäº¤è®¨è®ºã€‚</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">config</span></code> (dict | <a class="reference internal" href="api/doc/ray.runtime_env.RuntimeEnvConfig.html#ray.runtime_env.RuntimeEnvConfig" title="ray.runtime_env.RuntimeEnvConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">ray.runtime_env.RuntimeEnvConfig</span></code></a>): è¿è¡Œæ—¶é…ç½®ã€‚å¯ä»¥æ˜¯ dict æˆ– RuntimeEnvConfigã€‚
å­—æ®µï¼š
(1) setup_timeout_seconds ï¼Œè¿è¡Œæ—¶ç¯å¢ƒåˆ›å»ºçš„è¶…æ—¶æ—¶é—´ï¼Œå•ä½ä¸ºç§’ã€‚</p>
<ul class="simple">
<li><p>ç¤ºä¾‹: <code class="docutils literal notranslate"><span class="pre">{&quot;setup_timeout_seconds&quot;:</span> <span class="pre">10}</span></code></p></li>
<li><p>ç¤ºä¾‹: <code class="docutils literal notranslate"><span class="pre">RuntimeEnvConfig(setup_timeout_seconds=10)</span></code></p></li>
</ul>
<p>(2) <code class="docutils literal notranslate"><span class="pre">eager_install</span></code> (bool): è¡¨ç¤ºæ˜¯å¦åœ¨ <code class="docutils literal notranslate"><span class="pre">ray.init()</span></code> æ—¶åœ¨é›†ç¾¤ä¸Šå®‰è£…è¿è¡Œæ—¶ç¯å¢ƒï¼Œè€Œä¸æ˜¯åœ¨å·¥ä½œç¨‹åºè¢«ç§Ÿç”¨ä¹‹å‰ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ­¤æ ‡å¿—è®¾ç½®ä¸º <code class="docutils literal notranslate"><span class="pre">True</span></code>ã€‚
å¦‚æœè®¾ç½®ä¸º <code class="docutils literal notranslate"><span class="pre">False</span></code>ï¼Œåˆ™åªæœ‰åœ¨è°ƒç”¨ç¬¬ä¸€ä¸ªä»»åŠ¡æˆ–åˆ›å»ºç¬¬ä¸€ä¸ª actor æ—¶æ‰ä¼šå®‰è£…è¿è¡Œæ—¶ç¯å¢ƒã€‚
å½“å‰ï¼Œä¸æ”¯æŒä¸ºæ¯ä¸ª actor æˆ–æ¯ä¸ªä»»åŠ¡æŒ‡å®šæ­¤é€‰é¡¹ã€‚</p>
<ul class="simple">
<li><p>ç¤ºä¾‹: <code class="docutils literal notranslate"><span class="pre">{&quot;eager_install&quot;:</span> <span class="pre">False}</span></code></p></li>
<li><p>ç¤ºä¾‹: <code class="docutils literal notranslate"><span class="pre">RuntimeEnvConfig(eager_install=False)</span></code></p></li>
</ul>
</li>
</ul>
<section id="runtime-environments-caching">
<span id="id8"></span><h4>ç¼“å­˜å’Œåƒåœ¾å›æ”¶<a class="headerlink" href="#runtime-environments-caching" title="Permalink to this headline">#</a></h4>
<p>åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šçš„è¿è¡Œæ—¶èµ„æºï¼ˆå¦‚ conda ç¯å¢ƒã€pip åŒ…æˆ–ä¸‹è½½çš„ <code class="docutils literal notranslate"><span class="pre">working_dir</span></code> æˆ– <code class="docutils literal notranslate"><span class="pre">py_modules</span></code> ç›®å½•ï¼‰å°†è¢«ç¼“å­˜åœ¨é›†ç¾¤ä¸Šï¼Œä»¥ä¾¿åœ¨ä½œä¸šå†…çš„ä¸åŒè¿è¡Œæ—¶ç¯å¢ƒä¹‹é—´å¿«é€Ÿé‡ç”¨ã€‚
æ¯ä¸ªå­—æ®µï¼ˆ<code class="docutils literal notranslate"><span class="pre">working_dir</span></code>ã€<code class="docutils literal notranslate"><span class="pre">py_modules</span></code> ç­‰ï¼‰éƒ½æœ‰è‡ªå·±çš„ç¼“å­˜ï¼Œé»˜è®¤å¤§å°ä¸º 10 GBã€‚è¦æ›´æ”¹æ­¤é»˜è®¤å€¼ï¼Œæ‚¨å¯ä»¥åœ¨å¯åŠ¨ Ray ä¹‹å‰åœ¨é›†ç¾¤ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹ä¸Šè®¾ç½®ç¯å¢ƒå˜é‡ <code class="docutils literal notranslate"><span class="pre">RAY_RUNTIME_ENV_&lt;field&gt;_CACHE_SIZE_GB</span></code>ï¼Œä¾‹å¦‚ <code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">RAY_RUNTIME_ENV_WORKING_DIR_CACHE_SIZE_GB=1.5</span></code>ã€‚</p>
<p>å½“è¶…è¿‡ç¼“å­˜å¤§å°é™åˆ¶æ—¶ï¼Œä¸è¢«ä»»ä½• actorã€ä»»åŠ¡æˆ–ä½œä¸šå½“å‰ä½¿ç”¨çš„èµ„æºå°†è¢«åˆ é™¤ã€‚</p>
</section>
<section id="id9">
<h4>ç»§æ‰¿<a class="headerlink" href="#id9" title="Permalink to this headline">#</a></h4>
<p>è¿è¡Œæ—¶ç¯å¢ƒæ˜¯å¯ç»§æ‰¿çš„ï¼Œå› æ­¤å®ƒå°†åº”ç”¨äºä½œä¸šä¸­çš„æ‰€æœ‰ä»»åŠ¡ / actor ä»¥åŠtask æˆ– actorçš„æ‰€æœ‰å­ä»»åŠ¡ / actorï¼Œé™¤éå®ƒè¢«è¦†ç›–ã€‚</p>
<p>å¦‚æœä¸€ä¸ª actor æˆ–ä»»åŠ¡æŒ‡å®šäº†ä¸€ä¸ªæ–°çš„ <code class="docutils literal notranslate"><span class="pre">runtime_env</span></code>ï¼Œå®ƒå°†è¦†ç›–çˆ¶çº§çš„ <code class="docutils literal notranslate"><span class="pre">runtime_env``ï¼ˆå³ï¼Œçˆ¶çº§</span> <span class="pre">actor/ä»»åŠ¡çš„</span> <span class="pre">``runtime_env</span></code>ï¼Œæˆ–è€…å¦‚æœæ²¡æœ‰çˆ¶çº§ actor æˆ–ä»»åŠ¡ï¼Œåˆ™æ˜¯ä½œä¸šçš„ <code class="docutils literal notranslate"><span class="pre">runtime_env</span></code>ï¼‰å¦‚ä¸‹ï¼š</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">runtime_env[&quot;env_vars&quot;]</span></code> å­—æ®µä¼šä¸çˆ¶çº§çš„ <code class="docutils literal notranslate"><span class="pre">runtime_env[&quot;env_vars&quot;]</span></code> å­—æ®µåˆå¹¶ã€‚
è¿™å…è®¸åœ¨çˆ¶çº§çš„è¿è¡Œæ—¶ç¯å¢ƒä¸­è®¾ç½®çš„ç¯å¢ƒå˜é‡è‡ªåŠ¨ä¼ æ’­åˆ°å­çº§ï¼Œå³ä½¿åœ¨å­çº§çš„è¿è¡Œæ—¶ç¯å¢ƒä¸­è®¾ç½®äº†æ–°çš„ç¯å¢ƒå˜é‡ã€‚</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">runtime_env</span></code> å­—æ®µä¸­çš„å…¶ä»–æ¯ä¸ªå­—æ®µéƒ½å°†è¢«å­çº§ <em>è¦†ç›–</em>ï¼Œè€Œä¸æ˜¯åˆå¹¶ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœæŒ‡å®šäº† <code class="docutils literal notranslate"><span class="pre">runtime_env[&quot;py_modules&quot;]</span></code>ï¼Œå®ƒå°†æ›¿æ¢çˆ¶çº§çš„ <code class="docutils literal notranslate"><span class="pre">runtime_env[&quot;py_modules&quot;]</span></code> å­—æ®µã€‚</p></li>
</ul>
<p>ç¤ºä¾‹:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Parent&#39;s `runtime_env`</span>
<span class="p">{</span><span class="s2">&quot;pip&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;requests&quot;</span><span class="p">,</span> <span class="s2">&quot;chess&quot;</span><span class="p">],</span>
<span class="s2">&quot;env_vars&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="s2">&quot;b&quot;</span><span class="p">}}</span>

<span class="c1"># Child&#39;s specified `runtime_env`</span>
<span class="p">{</span><span class="s2">&quot;pip&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;torch&quot;</span><span class="p">,</span> <span class="s2">&quot;ray[serve]&quot;</span><span class="p">],</span>
<span class="s2">&quot;env_vars&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="s2">&quot;new&quot;</span><span class="p">,</span> <span class="s2">&quot;C&quot;</span><span class="p">:</span> <span class="s2">&quot;c&quot;</span><span class="p">}}</span>

<span class="c1"># Child&#39;s actual `runtime_env` (merged with parent&#39;s)</span>
<span class="p">{</span><span class="s2">&quot;pip&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;torch&quot;</span><span class="p">,</span> <span class="s2">&quot;ray[serve]&quot;</span><span class="p">],</span>
<span class="s2">&quot;env_vars&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="s2">&quot;new&quot;</span><span class="p">,</span> <span class="s2">&quot;C&quot;</span><span class="p">:</span> <span class="s2">&quot;c&quot;</span><span class="p">}}</span>
</pre></div>
</div>
</section>
</section>
<section id="runtime-env-faq">
<span id="id10"></span><h3>å¸¸è§é—®é¢˜<a class="headerlink" href="#runtime-env-faq" title="Permalink to this headline">#</a></h3>
<section id="id11">
<h4>ç¯å¢ƒä¼šè¢«å®‰è£…åˆ°æ¯ä¸ªèŠ‚ç‚¹å—ï¼Ÿ<a class="headerlink" href="#id11" title="Permalink to this headline">#</a></h4>
<p>å¦‚æœåœ¨ <code class="docutils literal notranslate"><span class="pre">ray.init(runtime_env=...)</span></code> ä¸­æŒ‡å®šäº†è¿è¡Œæ—¶ç¯å¢ƒï¼Œåˆ™è¯¥ç¯å¢ƒå°†å®‰è£…åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šã€‚æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… <a class="reference internal" href="#rte-per-job"><span class="std std-ref">Per-Job</span></a>ã€‚
ï¼ˆæ³¨æ„ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œè¿è¡Œæ—¶ç¯å¢ƒå°†æ€¥åˆ‡åœ°å®‰è£…åœ¨é›†ç¾¤ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹ä¸Šã€‚å¦‚æœæ‚¨æƒ³æŒ‰éœ€æ‡’æƒ°åœ°å®‰è£…è¿è¡Œæ—¶ç¯å¢ƒï¼Œè¯·å°† <code class="docutils literal notranslate"><span class="pre">eager_install</span></code> é€‰é¡¹è®¾ç½®ä¸º falseï¼š<code class="docutils literal notranslate"><span class="pre">ray.init(runtime_env={...,</span> <span class="pre">&quot;config&quot;:</span> <span class="pre">{&quot;eager_install&quot;:</span> <span class="pre">False}}</span></code>ã€‚ï¼‰</p>
</section>
<section id="id12">
<h4>ç¯å¢ƒä»€ä¹ˆæ—¶å€™å®‰è£…ï¼Ÿ<a class="headerlink" href="#id12" title="Permalink to this headline">#</a></h4>
<p>å½“æŒ‡å®šä¸ºæ¯ä¸ªä½œä¸šæ—¶ï¼Œç¯å¢ƒåœ¨è°ƒç”¨ <code class="docutils literal notranslate"><span class="pre">ray.init()</span></code> å®‰è£…ï¼ˆé™¤éè®¾ç½®äº† <code class="docutils literal notranslate"><span class="pre">&quot;eager_install&quot;:</span> <span class="pre">False</span></code>ï¼‰ã€‚
å½“æŒ‡å®šä¸ºæ¯ä¸ªä»»åŠ¡æˆ–æ¯ä¸ª actor æ—¶ï¼Œç¯å¢ƒåœ¨è°ƒç”¨ä»»åŠ¡æˆ–åˆ›å»º actor æ—¶å®‰è£…ï¼ˆå³ï¼Œå½“ä½ è°ƒç”¨ <code class="docutils literal notranslate"><span class="pre">my_task.remote()</span></code> æˆ– <code class="docutils literal notranslate"><span class="pre">my_actor.remote()</span></code> æ—¶ï¼‰ã€‚
å‚è€ƒ <a class="reference internal" href="#rte-per-job"><span class="std std-ref">Per-Job</span></a> å’Œ <a class="reference internal" href="#rte-per-task-actor"><span class="std std-ref">Per-Task/Actor, within a job</span></a> ä»¥è·å–æ›´å¤šè¯¦ç»†ä¿¡æ¯ã€‚</p>
</section>
<section id="id13">
<h4>ç¯å¢ƒç¼“å­˜åœ¨å“ªé‡Œï¼Ÿ<a class="headerlink" href="#id13" title="Permalink to this headline">#</a></h4>
<p>ç¯å¢ƒä¸‹è½½çš„ä»»ä½•æœ¬åœ°æ–‡ä»¶éƒ½ç¼“å­˜åœ¨ <code class="docutils literal notranslate"><span class="pre">/tmp/ray/session_latest/runtime_resources</span></code>ã€‚</p>
</section>
<section id="id14">
<h4>å®‰è£…æˆ–ä»ç¼“å­˜åŠ è½½éœ€è¦å¤šé•¿æ—¶é—´ï¼Ÿ<a class="headerlink" href="#id14" title="Permalink to this headline">#</a></h4>
<p>å®‰è£…æ—¶é—´é€šå¸¸å–å†³äºæ‚¨ä½¿ç”¨çš„ <code class="docutils literal notranslate"><span class="pre">runtime_env</span></code> é€‰é¡¹ï¼Œä¸»è¦æ˜¯è¿è¡Œ <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span></code> æˆ– <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">create</span></code> / <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">activate</span></code>ï¼Œæˆ–è€…ä¸Šä¼ /ä¸‹è½½ <code class="docutils literal notranslate"><span class="pre">working_dir</span></code>ï¼Œ
è¿™å¯èƒ½éœ€è¦å‡ ç§’é’Ÿæˆ–å‡ åˆ†é’Ÿã€‚</p>
<p>å¦ä¸€æ–¹é¢ï¼Œä»ç¼“å­˜åŠ è½½è¿è¡Œæ—¶ç¯å¢ƒåº”è¯¥å‡ ä¹ä¸æ™®é€š Ray worker å¯åŠ¨æ—¶é—´ä¸€æ ·å¿«ï¼Œå¤§çº¦å‡ ç§’é’Ÿã€‚å¯¹äºæ¯ä¸ªéœ€è¦æ–°è¿è¡Œæ—¶ç¯å¢ƒçš„ Ray actor æˆ–ä»»åŠ¡ï¼Œéƒ½ä¼šå¯åŠ¨ä¸€ä¸ªæ–°çš„ Ray workerã€‚</p>
<p>ï¼ˆè¯·æ³¨æ„ï¼ŒåŠ è½½ç¼“å­˜çš„ <code class="docutils literal notranslate"><span class="pre">conda</span></code> ç¯å¢ƒå¯èƒ½ä»ç„¶å¾ˆæ…¢ï¼Œå› ä¸º <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">activate</span></code> å‘½ä»¤æœ‰æ—¶éœ€è¦å‡ ç§’é’Ÿã€‚ï¼‰</p>
<p>ä½ å¯ä»¥è®¾ç½® <code class="docutils literal notranslate"><span class="pre">setup_timeout_seconds</span></code> é…ç½®æ¥é¿å…å®‰è£…æ—¶é—´è¿‡é•¿ã€‚å¦‚æœå®‰è£…åœ¨æ­¤æ—¶é—´å†…æ²¡æœ‰å®Œæˆï¼Œæ‚¨çš„task æˆ– actorå°†æ— æ³•å¯åŠ¨ã€‚</p>
</section>
<section id="docker">
<h4>è¿è¡Œç¯å¢ƒå’Œ Docker æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ<a class="headerlink" href="#docker" title="Permalink to this headline">#</a></h4>
<p>å®ƒä»¬å¯ä»¥å•ç‹¬ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥ä¸€èµ·ä½¿ç”¨ã€‚
å¯ä»¥åœ¨ <a class="reference internal" href="../cluster/vms/getting-started.html#vm-cluster-quick-start"><span class="std std-ref">Cluster Launcher</span></a> ä¸­æŒ‡å®šå®¹å™¨æ˜ åƒï¼Œç”¨äºå¤§å‹æˆ–é™æ€ä¾èµ–é¡¹ï¼Œå¹¶ä¸”å¯ä»¥ä¸ºæ¯ä¸ªä½œä¸šæˆ–æ¯ä¸ªä»»åŠ¡/ actor æŒ‡å®šè¿è¡Œæ—¶ç¯å¢ƒï¼Œä»¥ç”¨äºæ›´åŠ¨æ€çš„ç”¨ä¾‹ã€‚
è¿è¡Œæ—¶ç¯å¢ƒå°†ä»å®¹å™¨æ˜ åƒç»§æ‰¿åŒ…ã€æ–‡ä»¶å’Œç¯å¢ƒå˜é‡ã€‚</p>
</section>
<section id="runtime-env">
<h4>æˆ‘çš„ <code class="docutils literal notranslate"><span class="pre">runtime_env</span></code> å·²ç»å®‰è£…äº†ï¼Œä½†æ˜¯å½“æˆ‘ç™»å½•åˆ°èŠ‚ç‚¹æ—¶ï¼Œæˆ‘æ— æ³•å¯¼å…¥è¿™äº›åŒ…ã€‚<a class="headerlink" href="#runtime-env" title="Permalink to this headline">#</a></h4>
<p>è¿è¡Œæ—¶ç¯å¢ƒä»…å¯¹ Ray å·¥ä½œè¿›ç¨‹æœ‰æ•ˆï¼›å®ƒä¸ä¼šåœ¨èŠ‚ç‚¹ä¸Šâ€œå…¨å±€â€å®‰è£…ä»»ä½•åŒ…ã€‚</p>
</section>
</section>
</section>
<section id="uri">
<span id="remote-uris"></span><h2>è¿œç¨‹ URI<a class="headerlink" href="#uri" title="Permalink to this headline">#</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">worker_dir</span></code> å’Œ <code class="docutils literal notranslate"><span class="pre">py_modules</span></code> å‚æ•°åœ¨ <code class="docutils literal notranslate"><span class="pre">runtime_env</span></code> å­—å…¸ä¸­å¯ä»¥æŒ‡å®šæœ¬åœ°è·¯å¾„æˆ–è¿œç¨‹ URIã€‚</p>
<p>æœ¬åœ°è·¯å¾„å¿…é¡»æ˜¯ä¸€ä¸ªç›®å½•è·¯å¾„ã€‚ç›®å½•çš„å†…å®¹å°†ç›´æ¥ä½œä¸º <code class="docutils literal notranslate"><span class="pre">working_dir</span></code> æˆ– <code class="docutils literal notranslate"><span class="pre">py_module</span></code> è®¿é—®ã€‚
è¿œç¨‹ URI å¿…é¡»æ˜¯ä¸€ä¸ªç›´æ¥æŒ‡å‘ zip æ–‡ä»¶çš„é“¾æ¥ã€‚ <strong>zip æ–‡ä»¶å¿…é¡»åªåŒ…å«ä¸€ä¸ªé¡¶çº§ç›®å½•ã€‚</strong>
è¿™äº›ç›®å½•çš„å†…å®¹å°†ç›´æ¥ä½œä¸º <code class="docutils literal notranslate"><span class="pre">working_dir</span></code> æˆ– <code class="docutils literal notranslate"><span class="pre">py_module</span></code> è®¿é—®ã€‚</p>
<p>æ¯”å¦‚ï¼Œä½ æƒ³æŠŠ <code class="docutils literal notranslate"><span class="pre">/some_path/example_dir</span></code> ç›®å½•çš„å†…å®¹ä½œä¸ºä½ çš„ <code class="docutils literal notranslate"><span class="pre">working_dir</span></code>ã€‚
å¦‚æœä½ æƒ³æŒ‡å®šè¿™ä¸ªç›®å½•ä½œä¸ºä¸€ä¸ªæœ¬åœ°è·¯å¾„ï¼Œä½ çš„ <code class="docutils literal notranslate"><span class="pre">runtime_env</span></code> å­—å…¸åº”è¯¥åŒ…å«ï¼š</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">runtime_env</span> <span class="o">=</span> <span class="p">{</span><span class="o">...</span><span class="p">,</span> <span class="s2">&quot;working_dir&quot;</span><span class="p">:</span> <span class="s2">&quot;/some_path/example_dir&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">}</span>
</pre></div>
</div>
<p>å‡è®¾ä½ æƒ³æŠŠä½ çš„æ–‡ä»¶æ”¾åœ¨ <code class="docutils literal notranslate"><span class="pre">/some_path/example_dir</span></code> ç›®å½•ä¸­ï¼Œå¹¶æä¾›ä¸€ä¸ªè¿œç¨‹ URIã€‚
ä½ é¦–å…ˆéœ€è¦å°† <code class="docutils literal notranslate"><span class="pre">example_dir</span></code> ç›®å½•å‹ç¼©æˆä¸€ä¸ª zip æ–‡ä»¶ã€‚</p>
<p>è¿™é‡Œåº”è¯¥æ²¡æœ‰å…¶ä»–æ–‡ä»¶æˆ–ç›®å½•åœ¨ zip æ–‡ä»¶çš„é¡¶å±‚ï¼Œé™¤äº† <code class="docutils literal notranslate"><span class="pre">example_dir</span></code>ã€‚
ä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åœ¨ç»ˆç«¯ä¸­æ‰§è¡Œï¼š</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> /some_path
zip -r zip_file_name.zip example_dir
</pre></div>
</div>
<p>æ³¨æ„ï¼Œè¿™ä¸ªå‘½ä»¤å¿…é¡»ä»æ‰€éœ€ <code class="docutils literal notranslate"><span class="pre">working_dir</span></code> çš„ <em>çˆ¶ç›®å½•</em> è¿è¡Œï¼Œä»¥ç¡®ä¿ç”Ÿæˆçš„ zip æ–‡ä»¶åŒ…å«ä¸€ä¸ªé¡¶çº§ç›®å½•ã€‚
é€šå¸¸ï¼Œzip æ–‡ä»¶çš„åç§°å’Œé¡¶çº§ç›®å½•çš„åç§°å¯ä»¥æ˜¯ä»»ä½•ä¸œè¥¿ã€‚
é¡¶çº§ç›®å½•çš„å†…å®¹å°†è¢«ç”¨ä½œ <code class="docutils literal notranslate"><span class="pre">working_dir``ï¼ˆæˆ–</span> <span class="pre">``py_module</span></code>ï¼‰ã€‚</p>
<p>ä½ å¯ä»¥é€šè¿‡åœ¨ç»ˆç«¯ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥æ£€æŸ¥ zip æ–‡ä»¶æ˜¯å¦åŒ…å«ä¸€ä¸ªé¡¶çº§ç›®å½•ï¼š</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>zipinfo -1 zip_file_name.zip
<span class="c1"># example_dir/</span>
<span class="c1"># example_dir/my_file_1.txt</span>
<span class="c1"># example_dir/subdir/my_file_2.txt</span>
</pre></div>
</div>
<p>å‡è®¾ä½ å°†å‹ç¼©çš„ <code class="docutils literal notranslate"><span class="pre">example_dir</span></code> ç›®å½•ä¸Šä¼ åˆ° AWS S3 çš„ S3 URI <code class="docutils literal notranslate"><span class="pre">s3://example_bucket/example.zip</span></code>ã€‚
ä½ çš„ <code class="docutils literal notranslate"><span class="pre">runtime_env</span></code> å­—å…¸åº”è¯¥åŒ…å«ï¼š</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">runtime_env</span> <span class="o">=</span> <span class="p">{</span><span class="o">...</span><span class="p">,</span> <span class="s2">&quot;working_dir&quot;</span><span class="p">:</span> <span class="s2">&quot;s3://example_bucket/example.zip&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">}</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>æ£€æŸ¥åœ¨å‹ç¼©æ–‡ä»¶ä¸­æ˜¯å¦æœ‰éšè—æ–‡ä»¶æˆ–å…ƒæ•°æ®ç›®å½•ã€‚
ä½ å¯ä»¥é€šè¿‡åœ¨ç»ˆç«¯ä¸­è¿è¡Œ <code class="docutils literal notranslate"><span class="pre">zipinfo</span> <span class="pre">-1</span> <span class="pre">zip_file_name.zip</span></code> å‘½ä»¤æ¥æ£€æŸ¥ zip æ–‡ä»¶çš„å†…å®¹ã€‚
ä¸€äº›å‹ç¼©æ–¹æ³•å¯èƒ½ä¼šå¯¼è‡´éšè—æ–‡ä»¶æˆ–å…ƒæ•°æ®ç›®å½•å‡ºç°åœ¨ zip æ–‡ä»¶çš„é¡¶å±‚ã€‚
è¦é¿å…è¿™ç§æƒ…å†µï¼Œè¯·ç›´æ¥åœ¨è¦å‹ç¼©çš„ç›®å½•çš„çˆ¶ç›®å½•ä¸Šä½¿ç”¨ <code class="docutils literal notranslate"><span class="pre">zip</span> <span class="pre">-r</span></code> å‘½ä»¤ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ æœ‰ä¸€ä¸ªç›®å½•ç»“æ„ï¼Œå¦‚ï¼š<code class="docutils literal notranslate"><span class="pre">a/b</span></code>ï¼Œä½ æƒ³å‹ç¼© <code class="docutils literal notranslate"><span class="pre">b</span></code>ï¼Œè¯·åœ¨ç›®å½• <code class="docutils literal notranslate"><span class="pre">a</span></code> ä¸Šå‘å‡º <code class="docutils literal notranslate"><span class="pre">zip</span> <span class="pre">-r</span> <span class="pre">b</span></code> å‘½ä»¤ã€‚
å¦‚æœ Ray æ£€æµ‹åˆ°é¡¶å±‚æœ‰å¤šä¸ªç›®å½•ï¼Œå®ƒå°†ä½¿ç”¨æ•´ä¸ª zip æ–‡ä»¶è€Œä¸æ˜¯é¡¶å±‚ç›®å½•ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´æ„å¤–è¡Œä¸ºã€‚</p>
</div>
<p>å½“å‰æ”¯æŒä¸‰ç§è¿œç¨‹ URI ç±»å‹æ¥æ‰˜ç®¡ <code class="docutils literal notranslate"><span class="pre">working_dir</span></code> å’Œ <code class="docutils literal notranslate"><span class="pre">py_modules</span></code> åŒ…ï¼š</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">HTTPS</span></code>: <code class="docutils literal notranslate"><span class="pre">HTTPS</span></code> å¼•ç”¨æ—¶ä»¥ <code class="docutils literal notranslate"><span class="pre">https</span></code> æ‰“å¤´çš„ URLã€‚
è¿™äº› URL ç‰¹åˆ«æœ‰ç”¨ï¼Œå› ä¸ºè¿œç¨‹ Git æä¾›å•†ï¼ˆå¦‚ï¼šGitHubã€Bitbucketã€GitLab ç­‰ï¼‰ä½¿ç”¨ <code class="docutils literal notranslate"><span class="pre">https</span></code> URL ä½œä¸ºå­˜å‚¨åº“å­˜æ¡£çš„ä¸‹è½½é“¾æ¥ã€‚
è¿™å…è®¸ä½ å°†ä¾èµ–é¡¹æ‰˜ç®¡åœ¨è¿œç¨‹ Git æä¾›å•†ä¸Šï¼Œæ¨é€æ›´æ–°ï¼Œå¹¶æŒ‡å®šä½œä¸šåº”ä½¿ç”¨å“ªäº›ä¾èµ–é¡¹ç‰ˆæœ¬ï¼ˆå³æäº¤ç‰ˆæœ¬ï¼‰ã€‚
è¦é€šè¿‡ <code class="docutils literal notranslate"><span class="pre">HTTPS</span></code> URI ä½¿ç”¨åŒ…ï¼Œä½ å¿…é¡»å®‰è£… <code class="docutils literal notranslate"><span class="pre">smart_open</span></code> åº“ï¼ˆä½ å¯ä»¥ä½¿ç”¨ <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">smart_open</span></code> å®‰è£…å®ƒï¼‰ã€‚</p>
<ul>
<li><p>ç¤ºä¾‹:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">runtime_env</span> <span class="pre">=</span> <span class="pre">{&quot;working_dir&quot;:</span> <span class="pre">&quot;https://github.com/example_username/example_respository/archive/HEAD.zip&quot;}</span></code></p></li>
</ul>
</li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">S3</span></code>: <code class="docutils literal notranslate"><span class="pre">S3</span></code> å¼•ç”¨æ˜¯ä»¥ <code class="docutils literal notranslate"><span class="pre">s3://</span></code> æ‰“å¤´çš„ URIï¼Œå®ƒæŒ‡å‘äº†å­˜å‚¨åœ¨ <a class="reference external" href="https://aws.amazon.com/s3/">AWS S3</a> å‹ç¼©åŒ…ã€‚
è¦ä½¿ç”¨ <code class="docutils literal notranslate"><span class="pre">S3</span></code> URIï¼Œä½ å¿…é¡»å®‰è£… <code class="docutils literal notranslate"><span class="pre">smart_open</span></code> å’Œ <code class="docutils literal notranslate"><span class="pre">boto3</span></code> åº“ï¼ˆä½ å¯ä»¥ä½¿ç”¨ <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">smart_open</span></code> å’Œ <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">boto3</span></code> å®‰è£…å®ƒä»¬ï¼‰ã€‚
Ray ä¸ä¼šä¸ºè®¤è¯ä¼ é€’ä»»ä½•å‡­æ®ç»™ <code class="docutils literal notranslate"><span class="pre">boto3</span></code>ã€‚
<code class="docutils literal notranslate"><span class="pre">boto3</span></code> å°†ä½¿ç”¨ä½ çš„ç¯å¢ƒå˜é‡ã€å…±äº«å‡­æ®æ–‡ä»¶å’Œ/æˆ– AWS é…ç½®æ–‡ä»¶æ¥éªŒè¯è®¿é—®ã€‚
å‚è€ƒ <a class="reference external" href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/Welcome.html">AWS S3 æ–‡æ¡£</a> æ¥è®¾ç½®ä½ çš„è¿œç¨‹åŒ…ã€‚</p>
<ul>
<li><p>ç¤ºä¾‹:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">runtime_env</span> <span class="pre">=</span> <span class="pre">{&quot;working_dir&quot;:</span> <span class="pre">&quot;s3://example_bucket/example_file.zip&quot;}</span></code></p></li>
</ul>
</li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">GS</span></code>: <code class="docutils literal notranslate"><span class="pre">GS</span></code> å¼•ç”¨æ˜¯ä»¥ <code class="docutils literal notranslate"><span class="pre">gs://</span></code> æ‰“å¤´çš„ URIï¼Œå®ƒæŒ‡å‘äº†å­˜å‚¨åœ¨ <a class="reference external" href="https://cloud.google.com/storage">Google Cloud Storage</a> å‹ç¼©åŒ…ã€‚
è¦é€šè¿‡ <code class="docutils literal notranslate"><span class="pre">GS</span></code> URI ä½¿ç”¨åŒ…ï¼Œä½ å¿…é¡»å®‰è£… <code class="docutils literal notranslate"><span class="pre">smart_open</span></code> å’Œ <code class="docutils literal notranslate"><span class="pre">google-cloud-storage</span></code> åº“ï¼ˆä½ å¯ä»¥ä½¿ç”¨ <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">smart_open</span></code> å’Œ <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">google-cloud-storage</span></code> å®‰è£…å®ƒä»¬ï¼‰ã€‚
Ray ä¸ä¼šä¸º <code class="docutils literal notranslate"><span class="pre">google-cloud-storage</span></code> çš„ <code class="docutils literal notranslate"><span class="pre">Client</span></code> å¯¹è±¡ä¼ é€’ä»»ä½•å‡­æ®ã€‚
<code class="docutils literal notranslate"><span class="pre">google-cloud-storage</span></code> é»˜è®¤æƒ…å†µä¸‹å°†ä½¿ç”¨ä½ çš„æœ¬åœ°æœåŠ¡å¸æˆ·å¯†é’¥å’Œç¯å¢ƒå˜é‡ã€‚
å‚è€ƒ <a class="reference external" href="https://cloud.google.com/storage/docs">Google Cloud Storage æ–‡æ¡£</a> æ¥è®¾ç½®è®¤è¯ï¼Œå®ƒå…è®¸ä½ æ¥å…¥è¿œç¨‹åŒ…ã€‚</p>
<ul>
<li><p>ç¤ºä¾‹:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">runtime_env</span> <span class="pre">=</span> <span class="pre">{&quot;working_dir&quot;:</span> <span class="pre">&quot;gs://example_bucket/example_file.zip&quot;}</span></code></p></li>
</ul>
</li>
</ul>
</li>
</ul>
<p>æ³¨æ„ï¼Œ<code class="docutils literal notranslate"><span class="pre">smart_open</span></code>ã€<code class="docutils literal notranslate"><span class="pre">boto3</span></code> å’Œ <code class="docutils literal notranslate"><span class="pre">google-cloud-storage</span></code> åŒ…é»˜è®¤æƒ…å†µä¸‹ä¸ä¼šè¢«å®‰è£…ï¼Œä»…åœ¨ <code class="docutils literal notranslate"><span class="pre">runtime_env</span></code> çš„ <code class="docutils literal notranslate"><span class="pre">pip</span></code> éƒ¨åˆ†ä¸­æŒ‡å®šå®ƒä»¬æ˜¯ä¸å¤Ÿçš„ã€‚
åœ¨ Ray å¯åŠ¨æ—¶ï¼Œé›†ç¾¤çš„æ‰€æœ‰èŠ‚ç‚¹ä¸Šå¿…é¡»å·²ç»å®‰è£…äº†ç›¸å…³åŒ…ã€‚</p>
</section>
<section id="git">
<h2>åœ¨è¿œç¨‹ Git æä¾›å•†ä¸Šæ‰˜ç®¡ä¾èµ–é¡¹ï¼šæ‰‹æŠŠæ‰‹æŒ‡å—<a class="headerlink" href="#git" title="Permalink to this headline">#</a></h2>
<p>æ‚¨å¯ä»¥å°†ä¾èµ–é¡¹å­˜å‚¨åœ¨è¿œç¨‹ Git æä¾›å•†ï¼ˆä¾‹å¦‚ GitHubã€Bitbucketã€GitLab ç­‰ï¼‰çš„å­˜å‚¨åº“ä¸­ï¼Œå¹¶ä¸”å¯ä»¥å®šæœŸæ¨é€æ›´æ”¹ä»¥ä½¿å…¶ä¿æŒæ›´æ–°ã€‚
åœ¨æœ¬èŠ‚ä¸­ï¼Œæ‚¨å°†å­¦ä¹ å¦‚ä½•å°†ä¾èµ–é¡¹å­˜å‚¨åœ¨ GitHub ä¸Šå¹¶åœ¨è¿è¡Œæ—¶ç¯å¢ƒä¸­ä½¿ç”¨å®ƒã€‚</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>å¦‚æœæ‚¨ä½¿ç”¨å…¶ä»–å¤§å‹è¿œç¨‹ Git æä¾›å•†ï¼ˆä¾‹å¦‚ BitBucketã€GitLab ç­‰ï¼‰ï¼Œè¿™äº›æ­¥éª¤ä¹Ÿå°†å¾ˆæœ‰ç”¨ã€‚
ä¸ºç®€å•èµ·è§ï¼Œæœ¬èŠ‚ä»…æŒ‡ GitHubï¼Œä½†æ‚¨å¯ä»¥åœ¨æä¾›å•†ä¸Šç»§ç»­æ“ä½œã€‚</p>
</div>
<p>é¦–å…ˆï¼Œåœ¨ GitHub ä¸Šåˆ›å»ºä¸€ä¸ªå­˜å‚¨ <code class="docutils literal notranslate"><span class="pre">working_dir</span></code> å†…å®¹æˆ– <code class="docutils literal notranslate"><span class="pre">py_module</span></code> ä¾èµ–é¡¹çš„å­˜å‚¨åº“ã€‚
é»˜è®¤çš„ï¼Œå½“ä½ ä¸‹è½½å­˜å‚¨åº“çš„ zip æ–‡ä»¶æ—¶ï¼Œzip æ–‡ä»¶å°†å·²ç»åŒ…å«ä¸€ä¸ªé¡¶çº§ç›®å½•ï¼Œå…¶ä¸­åŒ…å«å­˜å‚¨åº“çš„å†…å®¹ï¼Œ
æ‰€ä»¥ä½ å¯ä»¥ç›´æ¥ä¸Šä¼ ä½ çš„ <code class="docutils literal notranslate"><span class="pre">working_dir</span></code> å†…å®¹æˆ– <code class="docutils literal notranslate"><span class="pre">py_module</span></code> ä¾èµ–é¡¹åˆ° GitHub å­˜å‚¨åº“ã€‚</p>
<p>ä¸€æ—¦ä½ ä¸Šä¼ äº† <code class="docutils literal notranslate"><span class="pre">working_dir</span></code> å†…å®¹æˆ– <code class="docutils literal notranslate"><span class="pre">py_module</span></code> ä¾èµ–é¡¹ï¼Œä½ éœ€è¦å­˜å‚¨åº“ zip æ–‡ä»¶çš„ HTTPS URLï¼Œè¿™æ ·ä½ å°±å¯ä»¥åœ¨ <code class="docutils literal notranslate"><span class="pre">runtime_env</span></code> å­—å…¸ä¸­æŒ‡å®šå®ƒã€‚</p>
<p>ä½ æœ‰ä¸¤ç§æ–¹æ³•è·å– HTTPS URLã€‚</p>
<section id="zip">
<h3>æ–¹æ³• 1: ä¸‹è½½ Zip (å¿«é€Ÿå®ç°ï¼Œå•ä¸æ¨èç”¨äºç”Ÿäº§ç¯å¢ƒ)<a class="headerlink" href="#zip" title="Permalink to this headline">#</a></h3>
<p>ç¬¬ä¸€ä¸ªé€‰é¡¹æ˜¯ä½¿ç”¨è¿œç¨‹ Git æä¾›å•†çš„ â€œDownload Zipâ€ åŠŸèƒ½ï¼Œå®ƒæä¾›äº†ä¸€ä¸ª HTTPS é“¾æ¥ï¼Œç”¨äºå‹ç¼©å¹¶ä¸‹è½½å­˜å‚¨åº“ã€‚
è¿™æ ·å¾ˆå¿«ï¼Œä½†æ˜¯ <strong>ä¸æ¨è</strong>ï¼Œå› ä¸ºå®ƒåªå…è®¸ä½ ä¸‹è½½å­˜å‚¨åº“åˆ†æ”¯çš„æœ€æ–°æäº¤çš„ zip æ–‡ä»¶ã€‚
è¦æ‰¾åˆ° GitHub URLï¼Œè¯·åœ¨ <a class="reference external" href="https://github.com/">GitHub</a>ï¼Œé€‰æ‹©ä¸€ä¸ªåˆ†æ”¯ï¼Œç„¶åç‚¹å‡»ç»¿è‰²çš„ â€œCodeâ€ ä¸‹æ‹‰æŒ‰é’®ï¼š</p>
<figure class="align-default">
<a class="reference internal image-reference" href="../_images/ray_repo.png"><img alt="../_images/ray_repo.png" src="../_images/ray_repo.png" style="width: 500px;" /></a>
</figure>
<p>è¿™ä¼šå¼¹å‡ºä¸€ä¸ªèœå•ï¼Œæä¾›ä¸‰ä¸ªé€‰é¡¹ï¼šâ€Cloneâ€ æä¾›äº†å…‹éš†å­˜å‚¨åº“çš„ HTTPS/SSH é“¾æ¥ï¼Œâ€Open with GitHub Desktopâ€ ä»¥åŠ â€œDownload ZIP.â€
ç‚¹å‡» â€œDownload Zip.â€
è¿™ä¼šåœ¨ä½ é¼ æ ‡å¼¹å‡ºä¸€ä¸ª popï¼Œé€‰æ‹©â€œCopy Link Addressâ€ï¼š</p>
<figure class="align-default">
<a class="reference internal image-reference" href="../_images/download_zip_url.png"><img alt="../_images/download_zip_url.png" src="../_images/download_zip_url.png" style="width: 300px;" /></a>
</figure>
<p>ç°åœ¨ä½ çš„ HTTPS é“¾æ¥å·²ç»å¤åˆ¶åˆ°å‰ªè´´æ¿ä¸­ã€‚ä½ å¯ä»¥å°†å®ƒç²˜è´´åˆ°ä½ çš„ <code class="docutils literal notranslate"><span class="pre">runtime_env</span></code> å­—å…¸ä¸­ã€‚</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>ä½¿ç”¨è¿œç¨‹ Git æä¾›å•†çš„ â€œDownload as Zipâ€ åŠŸèƒ½çš„ HTTPS URL ä¸æ¨èï¼Œå¦‚æœ URL æ€»æ˜¯æŒ‡å‘æœ€æ–°æäº¤çš„è¯ã€‚
ä¾‹å¦‚ï¼Œåœ¨ GitHub ä¸Šä½¿ç”¨æ­¤æ–¹æ³•ä¼šç”Ÿæˆä¸€ä¸ªå§‹ç»ˆæŒ‡å‘æ‰€é€‰åˆ†æ”¯ä¸Šçš„æœ€æ–°æäº¤çš„é“¾æ¥ã€‚</p>
<p>é€šè¿‡åœ¨ <code class="docutils literal notranslate"><span class="pre">runtime_env</span></code> å­—å…¸ä¸­æŒ‡å®šæ­¤é“¾æ¥ï¼Œä½ çš„ Ray é›†ç¾¤æ€»æ˜¯ä½¿ç”¨æ‰€é€‰åˆ†æ”¯çš„æœ€æ–°æäº¤ã€‚
è¿™ä¼šäº§ç”Ÿä¸€è‡´æ€§é£é™©ï¼šå¦‚æœä½ åœ¨é›†ç¾¤çš„èŠ‚ç‚¹æ‹‰å–å­˜å‚¨åº“å†…å®¹æ—¶æ¨é€äº†æ›´æ–°ï¼Œ
ä¸€äº›èŠ‚ç‚¹å¯èƒ½ä¼šæ‹‰å–ä½ æ¨é€ä¹‹å‰çš„åŒ…ç‰ˆæœ¬ï¼Œè€Œå¦ä¸€äº›èŠ‚ç‚¹å¯èƒ½ä¼šæ‹‰å–ä½ æ¨é€ä¹‹åçš„ç‰ˆæœ¬ã€‚
ä¸ºäº†ä¿æŒä¸€è‡´æ€§ï¼Œæœ€å¥½æŒ‡å®šä¸€ä¸ªç‰¹å®šçš„æäº¤ï¼Œè¿™æ ·æ‰€æœ‰èŠ‚ç‚¹éƒ½ä½¿ç”¨ç›¸åŒçš„åŒ…ã€‚
å‚è€ƒ â€œæ–¹æ³• 2: æ‰‹åŠ¨åˆ›å»º URLâ€ æ¥åˆ›å»ºä¸€ä¸ªæŒ‡å‘ç‰¹å®šæäº¤çš„ URLã€‚</p>
</div>
</section>
<section id="url">
<h3>æ–¹æ³• 2: æ‰‹åŠ¨åˆ›å»º URL (è¾ƒæ…¢å®ç°ï¼Œä½†æ¨èç”¨äºç”Ÿäº§)<a class="headerlink" href="#url" title="Permalink to this headline">#</a></h3>
<p>ç¬¬äºŒä¸ªé€‰é¡¹æ˜¯é€šè¿‡å°†ä½ çš„ç‰¹å®šç”¨ä¾‹ä¸ä»¥ä¸‹ç¤ºä¾‹ä¹‹ä¸€è¿›è¡Œæ¨¡å¼åŒ¹é…ï¼Œæ‰‹åŠ¨åˆ›å»ºæ­¤ URLã€‚
<strong>å»ºè®®è¿™æ ·åš</strong> å› ä¸ºå®ƒå¯ä»¥æ›´ç»†ç²’åº¦åœ°æ§åˆ¶åœ¨ç”Ÿæˆä¾èµ–é¡¹ zip æ–‡ä»¶æ—¶è¦ä½¿ç”¨å“ªä¸ªå­˜å‚¨åº“åˆ†æ”¯å’Œæäº¤ã€‚
è¿™äº›é€‰é¡¹å¯é˜²æ­¢ Ray Clusters ä¸Šçš„ä¸€è‡´æ€§é—®é¢˜ï¼ˆæœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…ä¸Šé¢çš„è­¦å‘Šï¼‰ã€‚
è¦åˆ›å»º URLï¼Œè¯·é€‰æ‹©ä¸‹é¢é€‚åˆæ‚¨ç”¨ä¾‹çš„ URL æ¨¡æ¿ï¼Œå¹¶ä½¿ç”¨å­˜å‚¨åº“ä¸­çš„ç‰¹å®šå€¼å¡«å†™æ‹¬å·ä¸­çš„æ‰€æœ‰å‚æ•°ï¼ˆä¾‹å¦‚ [ç”¨æˆ·å]ã€[å­˜å‚¨åº“] ç­‰ï¼‰ã€‚
ä¾‹å¦‚ï¼Œå‡è®¾ä½ çš„ GitHub ç”¨æˆ·åæ˜¯ <code class="docutils literal notranslate"><span class="pre">example_user</span></code>ï¼Œå­˜å‚¨åº“çš„åç§°æ˜¯ <code class="docutils literal notranslate"><span class="pre">example_repository</span></code>ï¼Œå¹¶ä¸”æ‰€éœ€çš„æäº¤å“ˆå¸Œæ˜¯ <code class="docutils literal notranslate"><span class="pre">abcdefg</span></code>ã€‚
å¦‚æœ <code class="docutils literal notranslate"><span class="pre">example_repository</span></code> æ˜¯å…¬å…±çš„ï¼Œå¹¶ä¸”ä½ æƒ³è¦æ£€ç´¢ <code class="docutils literal notranslate"><span class="pre">abcdefg</span></code> æäº¤ï¼ˆä¸ç¬¬ä¸€ä¸ªç¤ºä¾‹ç”¨ä¾‹åŒ¹é…ï¼‰ï¼ŒURL å°†æ˜¯ï¼š</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">runtime_env</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;working_dir&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;https://github.com&quot;</span>
                               <span class="s2">&quot;/example_user/example_repository/archive/abcdefg.zip&quot;</span><span class="p">)}</span>
</pre></div>
</div>
<p>ä»¥ä¸‹æ˜¯ä¸åŒç”¨ä¾‹å’Œå¯¹åº” URL çš„åˆ—è¡¨ï¼š</p>
<ul class="simple">
<li><p>ç¤ºä¾‹ï¼šä»å…¬å…± GitHub å­˜å‚¨åº“ä¸Šçš„ç‰¹å®šæäº¤å“ˆå¸Œä¸­æ£€ç´¢åŒ…</p></li>
</ul>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">runtime_env</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;working_dir&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;https://github.com&quot;</span>
                               <span class="s2">&quot;/[username]/[repository]/archive/[commit hash].zip&quot;</span><span class="p">)}</span>
</pre></div>
</div>
<ul class="simple">
<li><p>ç¤ºä¾‹ï¼š <strong>å¼€å‘é˜¶æ®µ</strong> ä½¿ç”¨ä¸ªäººæ¥å…¥è®¤è¯ä»ç§æœ‰ GitHub å­˜å‚¨åº“ä¸­æ£€ç´¢åŒ…ã€‚ <strong>ç”Ÿäº§é˜¶æ®µ</strong> è¯·å‚è€ƒ <a class="reference internal" href="runtime_env_auth.html#runtime-env-auth"><span class="std std-ref">æ­¤æ–‡æ¡£</span></a> ä»¥äº†è§£å¦‚ä½•å®‰å…¨åœ°å¯¹ç§æœ‰ä¾èµ–é¡¹è¿›è¡Œèº«ä»½éªŒè¯ã€‚</p></li>
</ul>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">runtime_env</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;working_dir&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;https://[username]:[personal access token]@github.com&quot;</span>
                               <span class="s2">&quot;/[username]/[private repository]/archive/[commit hash].zip&quot;</span><span class="p">)}</span>
</pre></div>
</div>
<ul class="simple">
<li><p>ç¤ºä¾‹ï¼šä»å…¬å…± GitHub å­˜å‚¨åº“çš„æœ€æ–°æäº¤ä¸­æ£€ç´¢åŒ…</p></li>
</ul>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">runtime_env</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;working_dir&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;https://github.com&quot;</span>
                               <span class="s2">&quot;/[username]/[repository]/archive/HEAD.zip&quot;</span><span class="p">)}</span>
</pre></div>
</div>
<ul class="simple">
<li><p>ç¤ºä¾‹ï¼šä»å…¬å…± Bitbucket å­˜å‚¨åº“ä¸Šçš„ç‰¹å®šæäº¤å“ˆå¸Œä¸­æ£€ç´¢åŒ…</p></li>
</ul>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">runtime_env</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;working_dir&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;https://bitbucket.org&quot;</span>
                               <span class="s2">&quot;/[owner]/[repository]/get/[commit hash].tar.gz&quot;</span><span class="p">)}</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>å»ºè®®æŒ‡å®šç‰¹å®šæäº¤ï¼Œè€Œä¸æ˜¯å§‹ç»ˆä½¿ç”¨æœ€æ–°æäº¤ã€‚
è¿™å¯ä»¥é˜²æ­¢å¤šèŠ‚ç‚¹ Ray é›†ç¾¤å‡ºç°ä¸€è‡´æ€§é—®é¢˜ã€‚
æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…â€œé€‰é¡¹ 1ï¼šä¸‹è½½ Zipâ€ä¸‹æ–¹çš„è­¦å‘Šã€‚</p>
</div>
<p>ä¸€æ—¦ä½ åœ¨ <code class="docutils literal notranslate"><span class="pre">runtime_env</span></code> å­—å…¸ä¸­æŒ‡å®šäº† URLï¼Œä½ å°±å¯ä»¥å°†å­—å…¸ä¼ é€’ç»™ <code class="docutils literal notranslate"><span class="pre">ray.init()</span></code> æˆ– <code class="docutils literal notranslate"><span class="pre">.options()</span></code> è°ƒç”¨ã€‚
æ­å–œï¼ä½ ç°åœ¨å·²ç»åœ¨ GitHub ä¸Šè¿œç¨‹æ‰˜ç®¡äº†ä¸€ä¸ª <code class="docutils literal notranslate"><span class="pre">runtime_env</span></code> ä¾èµ–é¡¹ï¼</p>
</section>
</section>
<section id="id17">
<h2>è°ƒè¯•<a class="headerlink" href="#id17" title="Permalink to this headline">#</a></h2>
<p>å¦‚æœ runtime_env æ— æ³•è®¾ç½®ï¼ˆä¾‹å¦‚ï¼Œç½‘ç»œé—®é¢˜ã€ä¸‹è½½å¤±è´¥ç­‰ï¼‰ï¼ŒRay å°†æ— æ³•è°ƒåº¦éœ€è¦ runtime_env çš„ä»»åŠ¡/ actor ã€‚
å¦‚æœä½ è°ƒç”¨ <code class="docutils literal notranslate"><span class="pre">ray.get</span></code>ï¼Œå®ƒå°†å¼•å‘ <code class="docutils literal notranslate"><span class="pre">RuntimeEnvSetupError</span></code> å¹¶æä¾›è¯¦ç»†çš„é”™è¯¯æ¶ˆæ¯ã€‚</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">ray</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="nd">@ray</span><span class="o">.</span><span class="n">remote</span>
<span class="k">def</span> <span class="nf">f</span><span class="p">():</span>
    <span class="k">pass</span>

<span class="nd">@ray</span><span class="o">.</span><span class="n">remote</span>
<span class="k">class</span> <span class="nc">A</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>

<span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="n">bad_env</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;conda&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;dependencies&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;this_doesnt_exist&quot;</span><span class="p">]}}</span>

<span class="c1"># [Tasks] will raise `RuntimeEnvSetupError`.</span>
<span class="k">try</span><span class="p">:</span>
  <span class="n">ray</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">options</span><span class="p">(</span><span class="n">runtime_env</span><span class="o">=</span><span class="n">bad_env</span><span class="p">)</span><span class="o">.</span><span class="n">remote</span><span class="p">())</span>
<span class="k">except</span> <span class="n">ray</span><span class="o">.</span><span class="n">exceptions</span><span class="o">.</span><span class="n">RuntimeEnvSetupError</span><span class="p">:</span>
  <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Task fails with RuntimeEnvSetupError&quot;</span><span class="p">)</span>

<span class="c1"># [Actors] will raise `RuntimeEnvSetupError`.</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">A</span><span class="o">.</span><span class="n">options</span><span class="p">(</span><span class="n">runtime_env</span><span class="o">=</span><span class="n">bad_env</span><span class="p">)</span><span class="o">.</span><span class="n">remote</span><span class="p">()</span>
<span class="k">try</span><span class="p">:</span>
  <span class="n">ray</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">f</span><span class="o">.</span><span class="n">remote</span><span class="p">())</span>
<span class="k">except</span> <span class="n">ray</span><span class="o">.</span><span class="n">exceptions</span><span class="o">.</span><span class="n">RuntimeEnvSetupError</span><span class="p">:</span>
  <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Actor fails with RuntimeEnvSetupError&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Task fails with RuntimeEnvSetupError
Actor fails with RuntimeEnvSetupError
</pre></div>
</div>
<p>å®Œæ•´çš„æ—¥å¿—å¯ä»¥åœ¨ <code class="docutils literal notranslate"><span class="pre">runtime_env_setup-[job_id].log</span></code> æ–‡ä»¶ä¸­æ‰¾åˆ°ï¼Œç”¨äºæ¯ä¸ª actor ã€æ¯ä¸ªä»»åŠ¡å’Œæ¯ä¸ªä½œä¸šçš„ç¯å¢ƒï¼Œæˆ–è€…
åœ¨ä½¿ç”¨ Ray Client æ—¶ç”¨äºæ¯ä¸ªä½œä¸šçš„ç¯å¢ƒä¸­çš„ <code class="docutils literal notranslate"><span class="pre">runtime_env_setup-ray_client_server_[port].log</span></code> æ–‡ä»¶ä¸­æ‰¾åˆ°ã€‚</p>
<blockquote>
<div><p>ä½ ä¹Ÿå¯ä»¥åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šåœ¨å¯åŠ¨ Ray ä¹‹å‰è®¾ç½®ç¯å¢ƒå˜é‡ <code class="docutils literal notranslate"><span class="pre">RAY_RUNTIME_ENV_LOG_TO_DRIVER_ENABLED=1</span></code>ï¼Œä¾‹å¦‚ä½¿ç”¨ Ray é›†ç¾¤é…ç½®æ–‡ä»¶ä¸­çš„ <code class="docutils literal notranslate"><span class="pre">setup_commands</span></code> (<a class="reference internal" href="../cluster/vms/references/ray-cluster-configuration.html#cluster-configuration-setup-commands"><span class="std std-ref">reference</span></a>)ã€‚</p>
</div></blockquote>
<p>è¿™ä¼šæ‰“å°å®Œæ•´çš„ <code class="docutils literal notranslate"><span class="pre">runtime_env</span></code> è®¾ç½®æ—¥å¿—æ¶ˆæ¯åˆ°é©±åŠ¨ç¨‹åºï¼ˆè°ƒç”¨ <code class="docutils literal notranslate"><span class="pre">ray.init()</span></code> çš„è„šæœ¬ï¼‰ã€‚</p>
<p>ç¤ºä¾‹æ—¥å¿—è¾“å‡ºï¼š</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">ray</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="n">runtime_env</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;pip&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;requests&quot;</span><span class="p">]})</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>(pid=runtime_env) 2022-02-28 14:12:33,653       INFO pip.py:188 -- Creating virtualenv at /tmp/ray/session_2022-02-28_14-12-29_909064_87908/runtime_resources/pip/0cc818a054853c3841171109300436cad4dcf594/virtualenv, current python dir /Users/user/anaconda3/envs/ray-py38
(pid=runtime_env) 2022-02-28 14:12:33,653       INFO utils.py:76 -- Run cmd[1] [&#39;/Users/user/anaconda3/envs/ray-py38/bin/python&#39;, &#39;-m&#39;, &#39;virtualenv&#39;, &#39;--app-data&#39;, &#39;/tmp/ray/session_2022-02-28_14-12-29_909064_87908/runtime_resources/pip/0cc818a054853c3841171109300436cad4dcf594/virtualenv_app_data&#39;, &#39;--reset-app-data&#39;, &#39;--no-periodic-update&#39;, &#39;--system-site-packages&#39;, &#39;--no-download&#39;, &#39;/tmp/ray/session_2022-02-28_14-12-29_909064_87908/runtime_resources/pip/0cc818a054853c3841171109300436cad4dcf594/virtualenv&#39;]
(pid=runtime_env) 2022-02-28 14:12:34,267       INFO utils.py:97 -- Output of cmd[1]: created virtual environment CPython3.8.11.final.0-64 in 473ms
(pid=runtime_env)   creator CPython3Posix(dest=/private/tmp/ray/session_2022-02-28_14-12-29_909064_87908/runtime_resources/pip/0cc818a054853c3841171109300436cad4dcf594/virtualenv, clear=False, no_vcs_ignore=False, global=True)
(pid=runtime_env)   seeder FromAppData(download=False, pip=bundle, setuptools=bundle, wheel=bundle, via=copy, app_data_dir=/private/tmp/ray/session_2022-02-28_14-12-29_909064_87908/runtime_resources/pip/0cc818a054853c3841171109300436cad4dcf594/virtualenv_app_data)
(pid=runtime_env)     added seed packages: pip==22.0.3, setuptools==60.6.0, wheel==0.37.1
(pid=runtime_env)   activators BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator,PythonActivator
(pid=runtime_env)
(pid=runtime_env) 2022-02-28 14:12:34,268       INFO utils.py:76 -- Run cmd[2] [&#39;/tmp/ray/session_2022-02-28_14-12-29_909064_87908/runtime_resources/pip/0cc818a054853c3841171109300436cad4dcf594/virtualenv/bin/python&#39;, &#39;-c&#39;, &#39;import ray; print(ray.__version__, ray.__path__[0])&#39;]
(pid=runtime_env) 2022-02-28 14:12:35,118       INFO utils.py:97 -- Output of cmd[2]: 3.0.0.dev0 /Users/user/ray/python/ray
(pid=runtime_env)
(pid=runtime_env) 2022-02-28 14:12:35,120       INFO pip.py:236 -- Installing python requirements to /tmp/ray/session_2022-02-28_14-12-29_909064_87908/runtime_resources/pip/0cc818a054853c3841171109300436cad4dcf594/virtualenv
(pid=runtime_env) 2022-02-28 14:12:35,122       INFO utils.py:76 -- Run cmd[3] [&#39;/tmp/ray/session_2022-02-28_14-12-29_909064_87908/runtime_resources/pip/0cc818a054853c3841171109300436cad4dcf594/virtualenv/bin/python&#39;, &#39;-m&#39;, &#39;pip&#39;, &#39;install&#39;, &#39;--disable-pip-version-check&#39;, &#39;--no-cache-dir&#39;, &#39;-r&#39;, &#39;/tmp/ray/session_2022-02-28_14-12-29_909064_87908/runtime_resources/pip/0cc818a054853c3841171109300436cad4dcf594/requirements.txt&#39;]
(pid=runtime_env) 2022-02-28 14:12:38,000       INFO utils.py:97 -- Output of cmd[3]: Requirement already satisfied: requests in /Users/user/anaconda3/envs/ray-py38/lib/python3.8/site-packages (from -r /tmp/ray/session_2022-02-28_14-12-29_909064_87908/runtime_resources/pip/0cc818a054853c3841171109300436cad4dcf594/requirements.txt (line 1)) (2.26.0)
(pid=runtime_env) Requirement already satisfied: idna&lt;4,&gt;=2.5 in /Users/user/anaconda3/envs/ray-py38/lib/python3.8/site-packages (from requests-&gt;-r /tmp/ray/session_2022-02-28_14-12-29_909064_87908/runtime_resources/pip/0cc818a054853c3841171109300436cad4dcf594/requirements.txt (line 1)) (3.2)
(pid=runtime_env) Requirement already satisfied: certifi&gt;=2017.4.17 in /Users/user/anaconda3/envs/ray-py38/lib/python3.8/site-packages (from requests-&gt;-r /tmp/ray/session_2022-02-28_14-12-29_909064_87908/runtime_resources/pip/0cc818a054853c3841171109300436cad4dcf594/requirements.txt (line 1)) (2021.10.8)
(pid=runtime_env) Requirement already satisfied: urllib3&lt;1.27,&gt;=1.21.1 in /Users/user/anaconda3/envs/ray-py38/lib/python3.8/site-packages (from requests-&gt;-r /tmp/ray/session_2022-02-28_14-12-29_909064_87908/runtime_resources/pip/0cc818a054853c3841171109300436cad4dcf594/requirements.txt (line 1)) (1.26.7)
(pid=runtime_env) Requirement already satisfied: charset-normalizer~=2.0.0 in /Users/user/anaconda3/envs/ray-py38/lib/python3.8/site-packages (from requests-&gt;-r /tmp/ray/session_2022-02-28_14-12-29_909064_87908/runtime_resources/pip/0cc818a054853c3841171109300436cad4dcf594/requirements.txt (line 1)) (2.0.6)
(pid=runtime_env)
(pid=runtime_env) 2022-02-28 14:12:38,001       INFO utils.py:76 -- Run cmd[4] [&#39;/tmp/ray/session_2022-02-28_14-12-29_909064_87908/runtime_resources/pip/0cc818a054853c3841171109300436cad4dcf594/virtualenv/bin/python&#39;, &#39;-c&#39;, &#39;import ray; print(ray.__version__, ray.__path__[0])&#39;]
(pid=runtime_env) 2022-02-28 14:12:38,804       INFO utils.py:97 -- Output of cmd[4]: 3.0.0.dev0 /Users/user/ray/python/ray
</pre></div>
</div>
<p>å‚è€ƒ <a class="reference internal" href="../ray-observability/user-guides/configure-logging.html#logging-directory-structure"><span class="std std-ref">Logging ç›®å½•ç»“æ„</span></a> è·å–æ›´å¤šä¿¡æ¯ã€‚</p>
</section>
</section>


              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="objects/object-spilling.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">å¯¹è±¡æº¢å‡º</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="scheduling/index.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">è°ƒåº¦</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><!-- Override the footer area for the sphinx-book-theme to include the CSAT widget -->
<div id="csat">
  <div id="csat-feedback-received" class="csat-hidden">
    <span>è°¢è°¢ä½ çš„åé¦ˆï¼</span>
  </div>
  <div id="csat-inputs">
    <span>æ˜¯å¦èƒ½å¸®åŠ©åˆ°ä½ ï¼Ÿ</span>
    <div id="csat-yes" class="csat-button">
      <svg id="csat-yes-icon" class="csat-hidden csat-icon" width="18" height="13" viewBox="0 0 18 13" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M7.00023 10.172L16.1922 0.979004L17.6072 2.393L7.00023 13L0.63623 6.636L2.05023 5.222L7.00023 10.172Z" fill="black"/>
      </svg>
      <span>æ˜¯<span>
    </div>
    <div id="csat-no" class="csat-button">
      <svg id="csat-no-icon" class="csat-hidden csat-icon" width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M7.00023 5.58599L11.9502 0.635986L13.3642 2.04999L8.41423 6.99999L13.3642 11.95L11.9502 13.364L7.00023 8.41399L2.05023 13.364L0.63623 11.95L5.58623 6.99999L0.63623 2.04999L2.05023 0.635986L7.00023 5.58599Z" fill="black"/>
      </svg>
      <span>å¦<span>
    </div>
  </div>
  <div id="csat-textarea-group" class="csat-hidden">
    <span id="csat-feedback-label">åé¦ˆ</span>
    <textarea id="csat-textarea"></textarea>
    <div id="csat-submit">æäº¤</div>
  </div>
</div><p>
  
    By The Ray Team<br/>
  
      &copy; Copyright 2024, The Ray Team.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>