
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>配置管理 Ray 仪表盘 &#8212; Ray 2.7.2</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/autodoc_pydantic.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css" />
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/termynal.css" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/js/versionwarning.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
    <script defer="defer" src="../_static/js/docsearch.js"></script>
    <script defer="defer" src="../_static/js/csat.js"></script>
    <script defer="defer" src="../_static/js/termynal.js"></script>
    <script defer="defer" src="../_static/js/custom.js"></script>
    <script defer="defer" src="../_static/js/top-navigation.js"></script>
    <script src="../_static/js/tags.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/design-tabs.js"></script>
    <link rel="canonical" href="https://docs.ray.io/en/latest/cluster/configure-manage-dashboard.html" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="应用指南" href="running-applications/index.html" />
    <link rel="prev" title="指标收集和监控" href="metrics.html" />

<!-- Fathom - beautiful, simple website analytics -->
<script src="https://deer.ray.io/script.js" data-site="WYYANYOS" defer></script>
<!-- / Fathom -->

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-110413294-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-110413294-1');
</script>

<script
  src="https://widget.kapa.ai/kapa-widget.bundle.js"
  data-website-id="18a8c339-4ec5-43c8-8182-db3f2bc8c6b6"
  data-project-name="Ray"
  data-project-color="#2C2C2C"
  data-project-logo="https://global.discourse-cdn.com/business7/uploads/ray/original/1X/8f4dcb72f7cd34e2a332d548bd65860994bc8ff1.png"
  data-modal-disclaimer = "Results are automated and may be incorrect or contain inappropriate information. Do not include any personal data or confidential information."
  data-modal-title = "Ray Docs AI - Ask a Question"
  data-button-position-bottom = "60px"
></script>

<script>
(function(apiKey){
    (function(p,e,n,d,o){var v,w,x,y,z;o=p[d]=p[d]||{};o._q=o._q||[];
    v=['initialize','identify','updateOptions','pageLoad','track'];for(w=0,x=v.length;w<x;++w)(function(m){
        o[m]=o[m]||function(){o._q[m===v[0]?'unshift':'push']([m].concat([].slice.call(arguments,0)));};})(v[w]);
        y=e.createElement(n);y.async=!0;y.src='https://cdn.pendo.io/agent/static/'+apiKey+'/pendo.js';
        z=e.getElementsByTagName(n)[0];z.parentNode.insertBefore(y,z);})(window,document,'script','pendo');

        pendo.initialize({
            visitor: {
                id: 'VISITOR-UNIQUE-ID'
            },
            account: {
                id: 'ACCOUNT-UNIQUE-ID'
            }
        });
})('f89fa48a-6dd7-4d7c-67cf-a8051ed891f2');
</script>



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"><div class='topnav'></div></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
      
      
      <h1 class="site-logo" id="site-title">Ray 2.7.2</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main Navigation">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../index.html">
                    欢迎来到 Ray ！
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Ray
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../ray-overview/index.html">
   概述「100%」
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ray-overview/getting-started.html">
   入门
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ray-overview/installation.html">
   安装「100%」
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ray-overview/use-cases.html">
   用例「100%」
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ray-overview/examples.html">
   示例库「1%」
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ray-overview/ray-libraries.html">
   生态「3%」
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ray-core/walkthrough.html">
   Ray 核心「100%」
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../data/data.html">
   Ray 数据「75%」
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../train/train.html">
   Ray 训练「0%」
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../tune/index.html">
   Ray 调参「0%」
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../serve/index.html">
   Ray Serve
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../rllib/index.html">
   Ray RLlib
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ray-more-libs/index.html">
   更多类库「40%」
  </a>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="getting-started.html">
   Ray 集群「100%」
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="key-concepts.html">
     关键概念
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="kubernetes/index.html">
     在 Kubernetes 部署
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="vms/index.html">
     在虚拟机部署
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="metrics.html">
     指标收集和监控
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     配置管理 Ray 仪表盘
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="running-applications/index.html">
     应用指引
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="faq.html">
     FAQ
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="package-overview.html">
     Ray Cluster 管理 API
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ray-observability/index.html">
   监控调试「100%」
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ray-references/api.html">
   参考「20%」
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ray-contribute/index.html">
   开发者指引「30%」
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ray-security/index.html">
   安全「100%」
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/ray-project/ray"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/ray-project/ray/issues/new?title=Issue%20on%20page%20%2Fcluster/configure-manage-dashboard.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="headerbtn__text-container">open issue</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/ray-project/ray/edit/master/doc/source/cluster/configure-manage-dashboard.md"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Edit this page"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="headerbtn__text-container">suggest edit</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../_sources/cluster/configure-manage-dashboard.md.txt"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.md</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#changing-the-ray-dashboard-port">
   Changing the Ray Dashboard port
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#viewing-ray-dashboard-in-browsers">
   Viewing Ray Dashboard in browsers
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#running-behind-a-reverse-proxy">
   Running behind a reverse proxy
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#disabling-the-dashboard">
   Disabling the Dashboard
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#embed-grafana-visualizations-into-ray-dashboard">
   Embed Grafana visualizations into Ray Dashboard
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#setting-up-prometheus">
     Setting up Prometheus
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#setting-up-grafana">
     Setting up Grafana
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#embedding-grafana-visualizations-into-ray-dashboard">
     Embedding Grafana visualizations into Ray Dashboard
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#alternate-prometheus-host-location">
       Alternate Prometheus host location
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#alternate-grafana-host-location">
       Alternate Grafana host location
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#user-authentication-for-grafana">
       User authentication for Grafana
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#troubleshooting">
       Troubleshooting
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#dashboard-message-either-prometheus-or-grafana-server-is-not-deteced">
         Dashboard message: either Prometheus or Grafana server is not deteced
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#getting-an-error-that-says-ray-grafana-host-is-not-setup">
         Getting an error that says
         <code class="docutils literal notranslate">
          <span class="pre">
           RAY_GRAFANA_HOST
          </span>
         </code>
         is not setup
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#certificate-authority-ca-error">
         Certificate Authority (CA error)
        </a>
       </li>
      </ul>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#viewing-built-in-dashboard-api-metrics">
   Viewing built-in Dashboard API metrics
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>配置管理 Ray 仪表盘</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#changing-the-ray-dashboard-port">
   Changing the Ray Dashboard port
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#viewing-ray-dashboard-in-browsers">
   Viewing Ray Dashboard in browsers
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#running-behind-a-reverse-proxy">
   Running behind a reverse proxy
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#disabling-the-dashboard">
   Disabling the Dashboard
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#embed-grafana-visualizations-into-ray-dashboard">
   Embed Grafana visualizations into Ray Dashboard
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#setting-up-prometheus">
     Setting up Prometheus
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#setting-up-grafana">
     Setting up Grafana
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#embedding-grafana-visualizations-into-ray-dashboard">
     Embedding Grafana visualizations into Ray Dashboard
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#alternate-prometheus-host-location">
       Alternate Prometheus host location
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#alternate-grafana-host-location">
       Alternate Grafana host location
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#user-authentication-for-grafana">
       User authentication for Grafana
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#troubleshooting">
       Troubleshooting
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#dashboard-message-either-prometheus-or-grafana-server-is-not-deteced">
         Dashboard message: either Prometheus or Grafana server is not deteced
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#getting-an-error-that-says-ray-grafana-host-is-not-setup">
         Getting an error that says
         <code class="docutils literal notranslate">
          <span class="pre">
           RAY_GRAFANA_HOST
          </span>
         </code>
         is not setup
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#certificate-authority-ca-error">
         Certificate Authority (CA error)
        </a>
       </li>
      </ul>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#viewing-built-in-dashboard-api-metrics">
   Viewing built-in Dashboard API metrics
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="ray">
<span id="observability-configure-manage-dashboard"></span><h1>配置管理 Ray 仪表盘<a class="headerlink" href="#ray" title="Permalink to this headline">#</a></h1>
<p><a class="reference internal" href="../ray-observability/getting-started.html#observability-getting-started"><span class="std std-ref">Ray Dashboard</span></a> is one of the most important tools to monitor and debug Ray applications and Clusters. This page describes how to configure Ray Dashboard on your Clusters.</p>
<p>Dashboard configurations may differ depending on how you launch Ray Clusters (e.g., local Ray Cluster v.s. KubeRay). Integrations with Prometheus and Grafana are optional for enhanced Dashboard experience.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Ray Dashboard is only intended for interactive development and debugging because the Dashboard UI and the underlying data are not accessible after Clusters are terminated. For production monitoring and debugging, users should rely on <a class="reference internal" href="kubernetes/user-guides/logging.html"><span class="doc std std-doc">persisted logs</span></a>, <a class="reference internal" href="metrics.html"><span class="doc std std-doc">persisted metrics</span></a>, <a class="reference internal" href="../ray-observability/user-guides/cli-sdk.html"><span class="doc std std-doc">persisted Ray states</span></a>, and other observability tools.</p>
</div>
<section id="changing-the-ray-dashboard-port">
<h2>Changing the Ray Dashboard port<a class="headerlink" href="#changing-the-ray-dashboard-port" title="Permalink to this headline">#</a></h2>
<p>Ray Dashboard runs on port <code class="docutils literal notranslate"><span class="pre">8265</span></code> of the head node. Follow the instructions below to customize the port if needed.</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-0" name="sd-tab-set-0" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-0">
Single-node local cluster</label><div class="sd-tab-content docutils">
<p><strong>Start the cluster explicitly with CLI</strong> <br/>
Pass the <code class="docutils literal notranslate"><span class="pre">--dashboard-port</span></code> argument with <code class="docutils literal notranslate"><span class="pre">ray</span> <span class="pre">start</span></code> in the command line.</p>
<p><strong>Start the cluster implicitly with <code class="docutils literal notranslate"><span class="pre">ray.init</span></code></strong> <br/>
Pass the keyword argument <code class="docutils literal notranslate"><span class="pre">dashboard_port</span></code> in your call to <code class="docutils literal notranslate"><span class="pre">ray.init()</span></code>.</p>
</div>
<input id="sd-tab-item-1" name="sd-tab-set-0" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-1">
VM Cluster Launcher</label><div class="sd-tab-content docutils">
<p>Include the <code class="docutils literal notranslate"><span class="pre">--dashboard-port</span></code> argument in the <code class="docutils literal notranslate"><span class="pre">head_start_ray_commands</span></code> section of the <a class="reference external" href="https://github.com/ray-project/ray/blob/0574620d454952556fa1befc7694353d68c72049/python/ray/autoscaler/aws/example-full.yaml#L172">Cluster Launcher’s YAML file</a>.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">head_start_ray_commands</span><span class="p">:</span><span class="w"> </span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ray stop</span><span class="w"> </span>
<span class="w">  </span><span class="c1"># Replace ${YOUR_PORT} with the port number you need.</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ulimit -n 65536; ray start --head --dashboard-port=${YOUR_PORT} --port=6379 --object-manager-port=8076 --autoscaling-config=~/ray_bootstrap_config.yaml</span><span class="w"> </span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-2" name="sd-tab-set-0" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-2">
KubeRay</label><div class="sd-tab-content docutils">
<p>View the <a class="reference external" href="https://docs.ray.io/en/latest/cluster/kubernetes/user-guides/config.html#specifying-non-default-ports">specifying non-default ports</a> page for details.</p>
</div>
</div>
</section>
<section id="viewing-ray-dashboard-in-browsers">
<span id="dashboard-in-browser"></span><h2>Viewing Ray Dashboard in browsers<a class="headerlink" href="#viewing-ray-dashboard-in-browsers" title="Permalink to this headline">#</a></h2>
<p>When you start a single-node Ray cluster on your laptop, you can access the dashboard through a URL printed when Ray is initialized (the default URL is <code class="docutils literal notranslate"><span class="pre">http://localhost:8265</span></code>).</p>
<p>When you start a remote Ray cluster with the <a class="reference internal" href="vms/getting-started.html#vm-cluster-quick-start"><span class="std std-ref">VM cluster launcher</span></a>, <a class="reference internal" href="kubernetes/getting-started.html#kuberay-quickstart"><span class="std std-ref">KubeRay operator</span></a>, or manual configuration, the Ray Dashboard launches on the head node but the dashboard port may not be publicly exposed. You need an additional setup to access the Ray Dashboard from outside the head node.</p>
<div class="admonition danger">
<p class="admonition-title">Danger</p>
<p>For security purpose, do not expose Ray Dashboard publicly without proper authentication in place.</p>
</div>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-3" name="sd-tab-set-1" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-3">
VM Cluster Launcher</label><div class="sd-tab-content docutils">
<p><strong>Port forwarding</strong> <br/>
You can securely port-forward local traffic to the dashboard with the <code class="docutils literal notranslate"><span class="pre">ray</span> <span class="pre">dashboard</span></code> command.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ ray dashboard <span class="o">[</span>-p &lt;port, <span class="m">8265</span> by default&gt;<span class="o">]</span> &lt;cluster config file&gt;
</pre></div>
</div>
<p>The dashboard is now visible at <code class="docutils literal notranslate"><span class="pre">http://localhost:8265</span></code>.</p>
</div>
<input id="sd-tab-item-4" name="sd-tab-set-1" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-4">
KubeRay</label><div class="sd-tab-content docutils">
<p>The KubeRay operator makes Dashboard available via a Service targeting the Ray head pod, named <code class="docutils literal notranslate"><span class="pre">&lt;RayCluster</span> <span class="pre">name&gt;-head-svc</span></code>. Access
Dashboard from within the Kubernetes cluster at <code class="docutils literal notranslate"><span class="pre">http://&lt;RayCluster</span> <span class="pre">name&gt;-head-svc:8265</span></code>.</p>
<p>There are two ways to expose Dashboard outside the Cluster:</p>
<p><strong>1. Setting up ingress</strong> <br/>
Follow the <a class="reference internal" href="kubernetes/k8s-ecosystem/ingress.html#kuberay-ingress"><span class="std std-ref">instructions</span></a> to set up ingress to access Ray Dashboard. <strong>The Ingress must only allows access from trusted sources.</strong></p>
<p><strong>2. Port forwarding</strong> <br/>
You can also view the dashboard from outside the Kubernetes cluster by using port-forwarding:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ kubectl port-forward --address <span class="m">0</span>.0.0.0 service/<span class="si">${</span><span class="nv">RAYCLUSTER_NAME</span><span class="si">}</span>-head-svc <span class="m">8265</span>:8265 
<span class="c1"># Visit ${YOUR_IP}:8265 for the Dashboard (e.g. 127.0.0.1:8265 or ${YOUR_VM_IP}:8265)</span>
</pre></div>
</div>
<div class="note admonition">
<p class="admonition-title">Note</p>
<p>Do not use port forwarding for production environment. Follow the instructions above to expose the Dashboard with Ingress.</p>
</div>
<p>For more information about configuring network access to a Ray cluster on Kubernetes, see the <a class="reference internal" href="kubernetes/user-guides/config.html#kuberay-networking"><span class="std std-ref">networking notes</span></a>.</p>
</div>
</div>
</section>
<section id="running-behind-a-reverse-proxy">
<h2>Running behind a reverse proxy<a class="headerlink" href="#running-behind-a-reverse-proxy" title="Permalink to this headline">#</a></h2>
<p>Ray Dashboard should work out-of-the-box when accessed via a reverse proxy. API requests don’t need to be proxied individually.</p>
<p>Always access the dashboard with a trailing <code class="docutils literal notranslate"><span class="pre">/</span></code> at the end of the URL.
For example, if your proxy is set up to handle requests to <code class="docutils literal notranslate"><span class="pre">/ray/dashboard</span></code>, view the dashboard at <code class="docutils literal notranslate"><span class="pre">www.my-website.com/ray/dashboard/</span></code>.</p>
<p>The dashboard sends HTTP requests with relative URL paths. Browsers handle these requests as expected when the <code class="docutils literal notranslate"><span class="pre">window.location.href</span></code> ends in a trailing <code class="docutils literal notranslate"><span class="pre">/</span></code>.</p>
<p>This is a peculiarity of how many browsers handle requests with relative URLs, despite what <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Learn/Common_questions/What_is_a_URL#examples_of_relative_urls">MDN</a> defines as the expected behavior.</p>
<p>Make your dashboard visible without a trailing <code class="docutils literal notranslate"><span class="pre">/</span></code> by including a rule in your reverse proxy that redirects the user’s browser to <code class="docutils literal notranslate"><span class="pre">/</span></code>, i.e. <code class="docutils literal notranslate"><span class="pre">/ray/dashboard</span></code> –&gt; <code class="docutils literal notranslate"><span class="pre">/ray/dashboard/</span></code>.</p>
<p>Below is an example with a <a class="reference external" href="https://doc.traefik.io/traefik/getting-started/quick-start/">traefik</a> TOML file that accomplishes this:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">[</span><span class="nv">http</span><span class="p p-Indicator">]</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">[</span><span class="nv">http.routers</span><span class="p p-Indicator">]</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">[</span><span class="nv">http.routers.to-dashboard</span><span class="p p-Indicator">]</span><span class="w"></span>
<span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">rule = &quot;PathPrefix(`/ray/dashboard`)&quot;</span><span class="w"></span>
<span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">middlewares = [&quot;test-redirectregex&quot;, &quot;strip&quot;]</span><span class="w"></span>
<span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">service = &quot;dashboard&quot;</span><span class="w"></span>
<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">[http.middlewares]</span><span class="w"></span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">[http.middlewares.test-redirectregex.redirectRegex]</span><span class="w"></span>
<span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">regex = &quot;^(.*)/ray/dashboard$&quot;</span><span class="w"></span>
<span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">replacement = &quot;${1}/ray/dashboard/&quot;</span><span class="w"></span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">[http.middlewares.strip.stripPrefix]</span><span class="w"></span>
<span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">prefixes = [&quot;/ray/dashboard&quot;]</span><span class="w"></span>
<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">[http.services]</span><span class="w"></span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">[http.services.dashboard.loadBalancer]</span><span class="w"></span>
<span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">[[http.services.dashboard.loadBalancer.servers]]</span><span class="w"></span>
<span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">url = &quot;http://localhost:8265&quot;</span><span class="w"></span>
</pre></div>
</div>
<div class="warning admonition">
<p class="admonition-title">Warning</p>
<p>The Ray Dashboard provides read <strong>and write</strong> access to the Ray Cluster. The reverse proxy must provide authentication or network ingress controls to prevent unauthorized access to the Cluster.</p>
</div>
</section>
<section id="disabling-the-dashboard">
<h2>Disabling the Dashboard<a class="headerlink" href="#disabling-the-dashboard" title="Permalink to this headline">#</a></h2>
<p>Dashboard is included if you use <code class="docutils literal notranslate"><span class="pre">ray[default]</span></code> or <a class="reference internal" href="../ray-overview/installation.html#installation"><span class="std std-ref">other installation commands</span></a> and automatically started.</p>
<p>To disable Dashboard, use the following arguments <code class="docutils literal notranslate"><span class="pre">--include-dashboard</span></code>.</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-5" name="sd-tab-set-2" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-5">
Single-node local cluster</label><div class="sd-tab-content docutils">
<p><strong>Start the cluster explicitly with CLI</strong> <br/></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ray start --include-dashboard<span class="o">=</span>False
</pre></div>
</div>
<p><strong>Start the cluster implicitly with <code class="docutils literal notranslate"><span class="pre">ray.init</span></code></strong> <br/></p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">ray</span>
<span class="n">ray</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="n">include_dashboard</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-6" name="sd-tab-set-2" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-6">
VM Cluster Launcher</label><div class="sd-tab-content docutils">
<p>Include the <code class="docutils literal notranslate"><span class="pre">ray</span> <span class="pre">start</span> <span class="pre">--head</span> <span class="pre">--include-dashboard=False</span></code> argument
in the <code class="docutils literal notranslate"><span class="pre">head_start_ray_commands</span></code> section of the <a class="reference external" href="https://github.com/ray-project/ray/blob/0574620d454952556fa1befc7694353d68c72049/python/ray/autoscaler/aws/example-full.yaml#L172">Cluster Launcher’s YAML file</a>.</p>
</div>
<input id="sd-tab-item-7" name="sd-tab-set-2" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-7">
KubeRay</label><div class="sd-tab-content docutils">
<div class="warning admonition">
<p class="admonition-title">Warning</p>
<p>It’s not recommended to disable Dashboard because several KubeRay features like <code class="docutils literal notranslate"><span class="pre">RayJob</span></code> and <code class="docutils literal notranslate"><span class="pre">RayService</span></code> depend on it.</p>
</div>
<p>Set <code class="docutils literal notranslate"><span class="pre">spec.headGroupSpec.rayStartParams.include-dashboard</span></code> to <code class="docutils literal notranslate"><span class="pre">False</span></code>. Check out this <a class="reference external" href="https://gist.github.com/kevin85421/0e6a8dd02c056704327d949b9ec96ef9">example YAML file</a>.</p>
</div>
</div>
</section>
<section id="embed-grafana-visualizations-into-ray-dashboard">
<span id="observability-visualization-setup"></span><h2>Embed Grafana visualizations into Ray Dashboard<a class="headerlink" href="#embed-grafana-visualizations-into-ray-dashboard" title="Permalink to this headline">#</a></h2>
<p>For the enhanced Ray Dashboard experience, like <a class="reference internal" href="../ray-observability/getting-started.html#dash-metrics-view"><span class="std std-ref">viewing time-series metrics</span></a> together with logs, Job info, etc., set up Prometheus and Grafana and integrate them with Ray Dashboard.</p>
<section id="setting-up-prometheus">
<h3>Setting up Prometheus<a class="headerlink" href="#setting-up-prometheus" title="Permalink to this headline">#</a></h3>
<p>To render Grafana visualizations, you need Prometheus to scrape metrics from Ray Clusters. Follow <a class="reference internal" href="metrics.html#prometheus-setup"><span class="std std-ref">the instructions</span></a> to set up your Prometheus server and start to scrape system and application metrics from Ray Clusters.</p>
</section>
<section id="setting-up-grafana">
<h3>Setting up Grafana<a class="headerlink" href="#setting-up-grafana" title="Permalink to this headline">#</a></h3>
<p>Grafana is a tool that supports advanced visualizations of Prometheus metrics and allows you to create custom dashboards with your favorite metrics. Follow <a class="reference internal" href="metrics.html#grafana"><span class="std std-ref">the instructions</span></a> to set up Grafana.</p>
</section>
<section id="embedding-grafana-visualizations-into-ray-dashboard">
<span id="embed-grafana-in-dashboard"></span><h3>Embedding Grafana visualizations into Ray Dashboard<a class="headerlink" href="#embedding-grafana-visualizations-into-ray-dashboard" title="Permalink to this headline">#</a></h3>
<p>To view embedded time-series visualizations in Ray Dashboard, the following must be set up:</p>
<ol class="simple">
<li><p>The head node of the cluster is able to access Prometheus and Grafana.</p></li>
<li><p>The browser of the dashboard user is able to access Grafana.</p></li>
</ol>
<p>Configure these settings using the <code class="docutils literal notranslate"><span class="pre">RAY_GRAFANA_HOST</span></code>, <code class="docutils literal notranslate"><span class="pre">RAY_PROMETHEUS_HOST</span></code>, <code class="docutils literal notranslate"><span class="pre">RAY_PROMETHEUS_NAME</span></code>, and <code class="docutils literal notranslate"><span class="pre">RAY_GRAFANA_IFRAME_HOST</span></code> environment variables when you start the Ray Clusters.</p>
<ul class="simple">
<li><p>Set <code class="docutils literal notranslate"><span class="pre">RAY_GRAFANA_HOST</span></code> to an address that the head node can use to access Grafana. Head node does health checks on Grafana on the backend.</p></li>
<li><p>Set <code class="docutils literal notranslate"><span class="pre">RAY_PROMETHEUS_HOST</span></code> to an address the head node can use to access Prometheus.</p></li>
<li><p>Set <code class="docutils literal notranslate"><span class="pre">RAY_PROMETHEUS_NAME</span></code> to select a different data source to use for the Grafana dashboard panles to use. Default is “Prometheus”.</p></li>
<li><p>Set <code class="docutils literal notranslate"><span class="pre">RAY_GRAFANA_IFRAME_HOST</span></code> to an address that the user’s browsers can use to access Grafana and embed visualizations. If <code class="docutils literal notranslate"><span class="pre">RAY_GRAFANA_IFRAME_HOST</span></code> is not set, Ray Dashboard uses the value of <code class="docutils literal notranslate"><span class="pre">RAY_GRAFANA_HOST</span></code>.</p></li>
</ul>
<p>For example, if the IP of the head node is 55.66.77.88 and Grafana is hosted on port 3000. Set the value to <code class="docutils literal notranslate"><span class="pre">RAY_GRAFANA_HOST=http://55.66.77.88:3000</span></code>.</p>
<ul class="simple">
<li><p>If you start a single-node Ray Cluster manually, make sure these environment variables are set and accessible before you start the cluster or as a prefix to the <code class="docutils literal notranslate"><span class="pre">ray</span> <span class="pre">start</span> <span class="pre">...</span></code> command, e.g., <code class="docutils literal notranslate"><span class="pre">RAY_GRAFANA_HOST=http://55.66.77.88:3000</span> <span class="pre">ray</span> <span class="pre">start</span> <span class="pre">...</span></code></p></li>
<li><p>If you start a Ray Cluster with <a class="reference internal" href="vms/index.html#cloud-vm-index"><span class="std std-ref">VM Cluster Launcher</span></a>, the environment variables should be set under <code class="docutils literal notranslate"><span class="pre">head_start_ray_commands</span></code> as a prefix to the <code class="docutils literal notranslate"><span class="pre">ray</span> <span class="pre">start</span> <span class="pre">...</span></code> command.</p></li>
<li><p>If you start a Ray Cluster with <a class="reference internal" href="kubernetes/index.html#kuberay-index"><span class="std std-ref">KubeRay</span></a>, refer to this <a class="reference internal" href="kubernetes/k8s-ecosystem/prometheus-grafana.html#kuberay-prometheus-grafana"><span class="std std-ref">tutorial</span></a>.</p></li>
</ul>
<p>If all the environment variables are set properly, you should see time-series metrics in <a class="reference internal" href="../ray-observability/getting-started.html#observability-getting-started"><span class="std std-ref">Ray Dashboard</span></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you use a different Prometheus server for each Ray Cluster and use the same Grafana server for all Clusters, set the <code class="docutils literal notranslate"><span class="pre">RAY_PROMETHEUS_NAME</span></code> environment variable to different values for each Ray Cluster and add these datasources in Grafana. Follow <a class="reference internal" href="metrics.html#grafana"><span class="std std-ref">these instructions</span></a> to set up Grafana.</p>
</div>
<section id="alternate-prometheus-host-location">
<h4>Alternate Prometheus host location<a class="headerlink" href="#alternate-prometheus-host-location" title="Permalink to this headline">#</a></h4>
<p>By default, Ray Dashboard assumes Prometheus is hosted at <code class="docutils literal notranslate"><span class="pre">localhost:9090</span></code>. You can choose to run Prometheus on a non-default port or on a different machine. In this case, make sure that Prometheus can scrape the metrics from your Ray nodes following instructions <a class="reference internal" href="metrics.html#scrape-metrics"><span class="std std-ref">here</span></a>.</p>
<p>Then, configure <code class="docutils literal notranslate"><span class="pre">RAY_PROMETHEUS_HOST</span></code> environment variable properly as stated above. For example, if Prometheus is hosted at port 9000 on a node with ip 55.66.77.88, set <code class="docutils literal notranslate"><span class="pre">RAY_PROMETHEUS_HOST=http://55.66.77.88:9000</span></code>.</p>
</section>
<section id="alternate-grafana-host-location">
<h4>Alternate Grafana host location<a class="headerlink" href="#alternate-grafana-host-location" title="Permalink to this headline">#</a></h4>
<p>By default, Ray Dashboard assumes Grafana is hosted at <code class="docutils literal notranslate"><span class="pre">localhost:3000</span></code> You can choose to run Grafana on a non-default port or on a different machine as long as the head node and the browsers of dashboard users can access it.</p>
<p>If Grafana is exposed with NGINX ingress on a Kubernetes cluster, the following line should be present in the Grafana ingress annotation:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">nginx.ingress.kubernetes.io/configuration-snippet</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span><span class="w"></span>
<span class="w">    </span><span class="no">add_header X-Frame-Options SAMEORIGIN always;</span><span class="w"></span>
</pre></div>
</div>
<p>When both Grafana and the Ray Cluster are on the same Kubernetes cluster, set <code class="docutils literal notranslate"><span class="pre">RAY_GRAFANA_HOST</span></code> to the external URL of the Grafana ingress.</p>
</section>
<section id="user-authentication-for-grafana">
<h4>User authentication for Grafana<a class="headerlink" href="#user-authentication-for-grafana" title="Permalink to this headline">#</a></h4>
<p>When the Grafana instance requires user authentication, the following settings have to be in its <a class="reference external" href="https://grafana.com/docs/grafana/latest/setup-grafana/configure-grafana/">configuration file</a> to correctly embed in Ray Dashboard:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="k">[security]</span><span class="w"></span>
<span class="w">  </span><span class="na">allow_embedding</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">true</span><span class="w"></span>
<span class="w">  </span><span class="na">cookie_secure</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">true</span><span class="w"></span>
<span class="w">  </span><span class="na">cookie_samesite</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">none</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="troubleshooting">
<h4>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this headline">#</a></h4>
<section id="dashboard-message-either-prometheus-or-grafana-server-is-not-deteced">
<h5>Dashboard message: either Prometheus or Grafana server is not deteced<a class="headerlink" href="#dashboard-message-either-prometheus-or-grafana-server-is-not-deteced" title="Permalink to this headline">#</a></h5>
<p>If you have followed the instructions above to set up everything, run the connection checks below in your browser:</p>
<ul class="simple">
<li><p>check Head Node connection to Prometheus server: add <code class="docutils literal notranslate"><span class="pre">api/prometheus_health</span></code> to the end of Ray Dashboard URL (for example: http://127.0.0.1:8265/api/prometheus_health)and visit it.</p></li>
<li><p>check Head Node connection to Grafana server: add <code class="docutils literal notranslate"><span class="pre">api/grafana_health</span></code> to the end of Ray Dashboard URL (for example: http://127.0.0.1:8265/api/grafana_health) and visit it.</p></li>
<li><p>check browser connection to Grafana server: visit the URL used in <code class="docutils literal notranslate"><span class="pre">RAY_GRAFANA_IFRAME_HOST</span></code>.</p></li>
</ul>
</section>
<section id="getting-an-error-that-says-ray-grafana-host-is-not-setup">
<h5>Getting an error that says <code class="docutils literal notranslate"><span class="pre">RAY_GRAFANA_HOST</span></code> is not setup<a class="headerlink" href="#getting-an-error-that-says-ray-grafana-host-is-not-setup" title="Permalink to this headline">#</a></h5>
<p>If you have set up Grafana , check that:</p>
<ul class="simple">
<li><p>You’ve included the protocol in the URL (e.g., <code class="docutils literal notranslate"><span class="pre">http://your-grafana-url.com</span></code> instead of <code class="docutils literal notranslate"><span class="pre">your-grafana-url.com</span></code>).</p></li>
<li><p>The URL doesn’t have a trailing slash (e.g., <code class="docutils literal notranslate"><span class="pre">http://your-grafana-url.com</span></code> instead of <code class="docutils literal notranslate"><span class="pre">http://your-grafana-url.com/</span></code>).</p></li>
</ul>
</section>
<section id="certificate-authority-ca-error">
<h5>Certificate Authority (CA error)<a class="headerlink" href="#certificate-authority-ca-error" title="Permalink to this headline">#</a></h5>
<p>You may see a CA error if your Grafana instance is hosted behind HTTPS. Contact the Grafana service owner to properly enable HTTPS traffic.</p>
</section>
</section>
</section>
</section>
<section id="viewing-built-in-dashboard-api-metrics">
<h2>Viewing built-in Dashboard API metrics<a class="headerlink" href="#viewing-built-in-dashboard-api-metrics" title="Permalink to this headline">#</a></h2>
<p>Dashboard is powered by a server that serves both the UI code and the data about the cluster via API endpoints.
Ray emits basic Prometheus metrics for each API endpoint:</p>
<p><code class="docutils literal notranslate"><span class="pre">ray_dashboard_api_requests_count_requests_total</span></code>: Collects the total count of requests. This is tagged by endpoint, method, and http_status.</p>
<p><code class="docutils literal notranslate"><span class="pre">ray_dashboard_api_requests_duration_seconds_bucket</span></code>: Collects the duration of requests. This is tagged by endpoint and method.</p>
<p>For example, you can view the p95 duration of all requests with this query:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>histogram_quantile(0.95, sum(rate(ray_dashboard_api_requests_duration_seconds_bucket[5m])) by (le))
</pre></div>
</div>
<p>You can query these metrics from the Prometheus or Grafana UI. Find instructions above for how to set these tools up.</p>
</section>
</section>


              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="metrics.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">指标收集和监控</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="running-applications/index.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">应用指南</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><!-- Override the footer area for the sphinx-book-theme to include the CSAT widget -->
<div id="csat">
  <div id="csat-feedback-received" class="csat-hidden">
    <span>谢谢你的反馈！</span>
  </div>
  <div id="csat-inputs">
    <span>是否能帮助到你？</span>
    <div id="csat-yes" class="csat-button">
      <svg id="csat-yes-icon" class="csat-hidden csat-icon" width="18" height="13" viewBox="0 0 18 13" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M7.00023 10.172L16.1922 0.979004L17.6072 2.393L7.00023 13L0.63623 6.636L2.05023 5.222L7.00023 10.172Z" fill="black"/>
      </svg>
      <span>是<span>
    </div>
    <div id="csat-no" class="csat-button">
      <svg id="csat-no-icon" class="csat-hidden csat-icon" width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M7.00023 5.58599L11.9502 0.635986L13.3642 2.04999L8.41423 6.99999L13.3642 11.95L11.9502 13.364L7.00023 8.41399L2.05023 13.364L0.63623 11.95L5.58623 6.99999L0.63623 2.04999L2.05023 0.635986L7.00023 5.58599Z" fill="black"/>
      </svg>
      <span>否<span>
    </div>
  </div>
  <div id="csat-textarea-group" class="csat-hidden">
    <span id="csat-feedback-label">反馈</span>
    <textarea id="csat-textarea"></textarea>
    <div id="csat-submit">提交</div>
  </div>
</div><p>
  
    By The Ray Team<br/>
  
      &copy; Copyright 2024, The Ray Team.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>